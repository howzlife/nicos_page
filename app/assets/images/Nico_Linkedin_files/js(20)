(function(){dust.register("tl/apps/profile/v2/embed/treasury_view_v2",N);
var ai={"media_cell_2row":M,"media_cell_3row":F,"thumbnail_view":an,"reorder_item":am,"hidden_view":aj};
function N(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("ne",aD,{"else":Z,"block":V},{"key":ap,"value":"true","type":"boolean"})
}function M(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<div tabindex="0" class="media-cell media-wrapper-2row treasury-open-item evt-dispatch').helper("eq",aD,{"block":L},{"key":K,"value":"-1"}).write('" data-event-id="treasury-open-item" data-item-id="').reference(aD.get("id"),aD,"h").write('">').block(aD.getBlock("thumbnail_view"),aD,{},null).write("</div>").section(aD.get("items"),aD,{"block":J},null)
}function L(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" media-add-frame cell disabled")
}function K(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("id"),aD,"h")
}function J(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get("meta"),aD,{"block":I},null)
}function I(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":H},{"key":G,"value":"-1"})
}function H(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("reorder_item"),aD,{},null)
}function G(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("id"),aD,"h")
}function F(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<div tabindex="0" class="media-cell media-wrapper-3row treasury-open-item evt-dispatch').helper("eq",aD,{"block":E},{"key":ax,"value":"-1"}).write('" data-event-id="treasury-open-item" data-item-id="').reference(aD.get("id"),aD,"h").write('">').block(aD.getBlock("thumbnail_view"),aD,{},null).write("</div>").section(aD.get("items"),aD,{"block":av},null)
}function E(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" media-add-frame cell disabled")
}function ax(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("id"),aD,"h")
}function av(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get("meta"),aD,{"block":at},null)
}function at(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":aq},{"key":ao,"value":"-1"})
}function aq(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("reorder_item"),aD,{},null)
}function ao(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("id"),aD,"h")
}function an(aE,aD){aD=aD.shiftBlocks(ai);
return aE.partial("tl/apps/profile/treasury/profile_thumbnail_view",aD,null)
}function am(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get("formData"),aD,{"block":al},{"group":ak,"itemId":"TRSY"})
}function al(aE,aD){aD=aD.shiftBlocks(ai);
return aE.partial("tl/apps/profile/treasury/reorder_item",aD,null)
}function ak(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("treasury-").reference(aD.get("profileElement"),aD,"h")
}function aj(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<a href="javascript:void(0)" class="hidden-view-more view-media-link evt-dispatch" data-event-id="treasury-view-more" role="button">').reference(aD.get("i18n_view_more"),aD,"h").write("</a>").helper("eq",aD,{"else":ah,"block":ag},{"key":aa,"value":"B"})
}function ah(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<a href="javascript:void(0)" class="hidden-view-less view-media-link evt-dispatch stealth" data-event-id="treasury-view-less" role="button">').reference(aD.get("i18n_view_less"),aD,"h").write("</a>")
}function ag(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get("items"),aD,{"block":af},null)
}function af(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get("meta"),aD,{"block":ae},null)
}function ae(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":ad},{"key":ab,"value":"-1"})
}function ad(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<a href="#tooltip-').reference(aD.get("profileElement"),aD,"h").write('" class="hidden-view-collapse evt-dispatch transparent" data-event-id="treasury-view-less">').reference(aD.get("i18n_collapse"),aD,"h").write("</a>").helper("jsControl",aD,{"block":ac},{"name":"LI.BalloonCallout"}).write('<div id="tooltip-').reference(aD.get("profileElement"),aD,"h").write('" class="callout-container"><div class="callout-content">').reference(aD.get("i18n_collapse"),aD,"h").write("</div></div>")
}function ac(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("{width: 'auto',id:'tooltip-").reference(aD.get("profileElement"),aD,"h",["h","j","s"]).write("',orientation: 'bottom',type: 'tooltip-callout'}")
}function ab(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("id"),aD,"h")
}function aa(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("lix_treasury_pagination"),aD,"h")
}function Z(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"else":Y,"block":X},{"key":W,"value":"2row"}).block(aD.getBlock("reorder_item"),aD,{},null)
}function Y(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("media_cell_3row"),aD,{},null)
}function X(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("media_cell_2row"),aD,{},null)
}function W(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("whichRow"),aD,"h")
}function V(aE,aD){aD=aD.shiftBlocks(ai);
return aE.exists(aD.get("items"),aD,{"block":U},null)
}function U(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get("items"),aD,{"block":T},null).write('<div class="treasury-container').helper("ne",aD,{"block":R},{"key":Q,"value":"true"}).helper("eq",aD,{"else":P,"block":O},{"key":aD.get("lix_facelift"),"value":"B"}).write('"').section(aD.get("items"),aD,{"block":D},null).write(">").section(aD.get("items"),aD,{"block":z},null).write("</div>").helper("eq",aD,{"else":b,"block":au},{"key":ar,"value":"true","type":"string"})
}function T(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":S},{"key":aD.get("$len"),"value":"1","type":"number"})
}function S(aE,aD){aD=aD.shiftBlocks(ai);
return aE.partial("tl/apps/profile/treasury/treasury_add_link",aD,null)
}function R(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" no-server-fetch")
}function Q(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("hasMore"),aD,"h")
}function P(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" original")
}function O(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" facelift")
}function D(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get("meta"),aD,{"block":C},null)
}function C(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":B},{"key":A,"value":"-1"})
}function B(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('data-section-id="').reference(aD.get("profileElement"),aD,"h").write('"')
}function A(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("id"),aD,"h")
}function z(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("math",aD,{"block":y},{"key":aD.get("$idx"),"method":"mod","operand":"5"}).helper("math",aD,{"block":f},{"key":aD.get("$len"),"method":"subtract","operand":aD.get("$idx")})
}function y(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("lte",aD,{"else":x,"block":o},{"value":"1","type":"number"})
}function x(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("math",aD,{"block":w},{"key":aD.get("$idx"),"method":"mod","operand":"5"})
}function w(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":v},{"value":"2","type":"number"}).section(aD.get("meta"),aD,{"block":q},null).helper("eq",aD,{"block":p},{"value":"4","type":"number"})
}function v(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<div class="media-wrapper').helper("gte",aD,{"block":u},{"key":aD.get("$idx"),"value":"5","type":"number"}).section(aD.get("meta"),aD,{"block":t},null).write('">')
}function u(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" stealth")
}function t(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":s},{"key":r,"value":"-1"})
}function s(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" media-add-frame")
}function r(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("id"),aD,"h")
}function q(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("media_cell_3row"),aD,{},null)
}function p(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("</div>")
}function o(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("math",aD,{"block":n},{"key":aD.get("$idx"),"method":"mod","operand":"5"})
}function n(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":m},{"value":"0","type":"number"}).section(aD.get("meta"),aD,{"block":h},null).helper("eq",aD,{"block":g},{"value":"1","type":"number"})
}function m(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write('<div class="media-wrapper').helper("gte",aD,{"block":l},{"key":aD.get("$idx"),"value":"5","type":"number"}).section(aD.get("meta"),aD,{"block":k},null).write('">')
}function l(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" stealth")
}function k(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":j},{"key":i,"value":"-1"})
}function j(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write(" media-add-frame")
}function i(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("id"),aD,"h")
}function h(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("media_cell_2row"),aD,{},null)
}function g(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("</div>")
}function f(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":e},{"value":"1","type":"number"})
}function e(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("math",aD,{"block":d},{"key":aD.get("$idx"),"method":"mod","operand":"5"})
}function d(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{},{"value":"1","type":"number"}).helper("eq",aD,{},{"value":"4","type":"number"}).helper("default",aD,{"block":c},null)
}function c(aE,aD){aD=aD.shiftBlocks(ai);
return aE.write("</div>")
}function b(aE,aD){aD=aD.shiftBlocks(ai);
return aE.section(aD.get("items"),aD,{"block":a},null)
}function a(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"block":aC},{"key":aD.get("$idx"),"value":"0","type":"number"})
}function aC(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("eq",aD,{"else":aB,"block":az},{"key":aw,"value":"true","type":"string"})
}function aB(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("gte",aD,{"block":aA},{"key":aD.get("$len"),"value":"6","type":"number"})
}function aA(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("hidden_view"),aD,{},null)
}function az(aE,aD){aD=aD.shiftBlocks(ai);
return aE.helper("gte",aD,{"block":ay},{"key":aD.get("$len"),"value":"7","type":"number"})
}function ay(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("hidden_view"),aD,{},null)
}function aw(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("selfView"),aD,"h")
}function au(aE,aD){aD=aD.shiftBlocks(ai);
return aE.block(aD.getBlock("hidden_view"),aD,{},null)
}function ar(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("hasMore"),aD,"h")
}function ap(aE,aD){aD=aD.shiftBlocks(ai);
return aE.reference(aD.get("addNew"),aD,"h")
}return N
})();
(function(){dust.register("treasury_view_v2",dust.cache["tl/apps/profile/v2/embed/treasury_view_v2"])
})();(function(){dust.register("tl/apps/profile/v2/embed/treasury_dialog_v2",m);
function m(q,p){return q.section(p.get("treasury"),p,{"block":k},null)
}function k(q,p){return q.exists(p.get("pictureID"),p,{"else":i,"block":g},null).write('<div class="treasury-dialog-wrapper">').exists(p.get("items"),p,{"block":f},null).write("</div>")
}function i(q,p){return q
}function g(q,p){return q
}function f(q,p){return q.write('<div></div><div class="carousel-container"><div class="carousel-wrapper"><ul class="carousel">').section(p.get("items"),p,{"block":e},null).write('</ul></div><a href="javascript:void(0);" class="btn-prev disabled evt-dispatch" data-event-id="treasury-carousel-prev" role="button">‹</a><a href="javascript:void(0);" class="btn-next evt-dispatch" data-event-id="treasury-carousel-next" role="button">›</a><p class="carousel-position"></p><div class="hr"></div></div>')
}function e(q,p){return q.section(p.get("comments"),p,{"block":d},null).section(p.get("meta"),p,{"block":b},null).section(p.get("likes"),p,{"block":a},null).section(p.get("meta"),p,{"block":n},null)
}function d(q,p){return q.section(p.get("recentComments"),p,{"block":c},null)
}function c(q,p){return q
}function b(q,p){return q
}function a(q,p){return q.section(p.get("recentActors"),p,{"block":o},null)
}function o(q,p){return q
}function n(q,p){return q.write('<li class="evt-dispatch" data-event-id="treasury-carousel-selected" data-item-id="').reference(p.get("id"),p,"h").write('"><a href="javascript:void(0);" role="button">').section(p.get("images"),p,{"block":l},null).write('</a><div class="meta"><div class="background"></div><p><span title="').reference(p.get("title"),p,"h").write('">').reference(p.get("title"),p,"h").write("</span></p></div></li>")
}function l(q,p){return q.helper("eq",p,{"block":j},{"key":h,"value":"0"})
}function j(q,p){return q.write('<img src="').reference(p.get("url"),p,"h").write('" title="').reference(p.get("title"),p,"h").write('" alt="').reference(p.get("altText"),p,"h").write('"/>')
}function h(q,p){return q.reference(p.get("$idx"),p,"h")
}return m
})();
(function(){dust.register("treasury_dialog_v2",dust.cache["tl/apps/profile/v2/embed/treasury_dialog_v2"])
})();(function(){dust.register("tl/apps/profile/treasury/profile_thumbnail_view",p);
function p(B,A){return B.helper("eq",A,{"else":n,"block":v},{"key":A.get("lix_facelift"),"value":"B"})
}function n(B,A){return B.write('<div class="outer"><span class="media-image-wrapper">').section(A.get("images"),A,{"block":m},null).write('<span class="centering-helper"></span></span></div><div class="media-desc"><div class="text-box"><p>').reference(A.get("title"),A,"h").write('</p></div><a class="btn-media-edit evt-dispatch').helper("eq",A,{"block":d},{"key":c,"value":"-1"}).write('" href="javascript:void(0);" title="').reference(A.get("i18n_Edit"),A,"h").write('" data-event-id="media-edit-item" data-id="').reference(A.get("id"),A,"h").write('" role="button">').reference(A.get("i18n_Edit"),A,"h").write("</a></div>")
}function m(B,A){return B.helper("eq",A,{"block":k},{"key":e,"value":"0","type":"number"})
}function k(B,A){return B.write('<img class="media-image ').exists(A.get("deferImg"),A,{"block":i},null).write('" ').exists(A.get("deferImg"),A,{"else":g,"block":f},null).write(' alt="').reference(A.get("title"),A,"h").write('" data-width="').reference(A.get("width"),A,"h").write('" data-height="').reference(A.get("height"),A,"h").write('"/>')
}function i(B,A){return B.write("lazy-load")
}function g(B,A){return B.write('src="').reference(A.get("url"),A,"h").write('"')
}function f(B,A){return B.write('src="').reference(A.get("spacer"),A,"h").write('" data-li-src="').reference(A.get("url"),A,"h").write('"')
}function e(B,A){return B.reference(A.get("$idx"),A,"h")
}function d(B,A){return B.write(" media-add-new")
}function c(B,A){return B.reference(A.get("id"),A,"h")
}function v(B,A){return B.write('<div class="media-data">').section(A.get("images"),A,{"else":u,"block":t},null).write('<div class="media-desc"><p class="description">').reference(A.get("title"),A,"h").write('</p></div></div><a class="media-edit btn-media-edit evt-dispatch').helper("eq",A,{"block":y},{"key":x,"value":"-1"}).write('" href="javascript:void(0);" title="').reference(A.get("i18n_Edit"),A,"h").write('" data-event-id="media-edit-item" data-id="').reference(A.get("id"),A,"h").write('" role="button"><span>').reference(A.get("i18n_Edit"),A,"h").write('</span><div class="loader"></div></a>').exists(A.get("slideShareUrl"),A,{"block":w},null)
}function u(B,A){return B.write('<div class="media-placeholder"></div>')
}function t(B,A){return B.helper("eq",A,{"block":s},{"key":z,"value":"0","type":"number"})
}function s(B,A){return B.write('<div class="media-image ').exists(A.get("deferImg"),A,{"block":r},null).helper("lt",A,{"block":q},{"key":A.get("width"),"value":"280"}).helper("lt",A,{"block":o},{"key":A.get("height"),"value":"136"}).write('"').exists(A.get("deferImg"),A,{"else":l,"block":j},null).write('><img class="thumbnail ').exists(A.get("deferImg"),A,{"block":h},null).write('" ').exists(A.get("deferImg"),A,{"else":b,"block":a},null).write(' alt="').reference(A.get("title"),A,"h").write('" data-width="').reference(A.get("width"),A,"h").write('" data-height="').reference(A.get("height"),A,"h").write('"/></div>')
}function r(B,A){return B.write("lazy-load")
}function q(B,A){return B.write(" img-has-small-width")
}function o(B,A){return B.write(" img-has-small-height")
}function l(B,A){return B.write("style=\"background-image: url('").reference(A.get("url"),A,"h").write("');-ms-filter: &quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(src='").reference(A.get("url"),A,"h").write("', sizingMethod='scale')&quot;;\"")
}function j(B,A){return B.write('data-li-src="').reference(A.get("url"),A,"h").write('"')
}function h(B,A){return B.write("lazy-load")
}function b(B,A){return B.write('src="').reference(A.get("url"),A,"h").write('"')
}function a(B,A){return B.write('src="').reference(A.get("spacer"),A,"h").write('" data-li-src="').reference(A.get("url"),A,"h").write('"')
}function z(B,A){return B.reference(A.get("$idx"),A,"h")
}function y(B,A){return B.write(" media-add-new")
}function x(B,A){return B.reference(A.get("id"),A,"h")
}function w(B,A){return B.write('<a class="media-slideshare evt-dispatch" data-event-id="media-open-slideshare" href="').reference(A.get("slideShareUrl"),A,"h").write('" title="').reference(A.get("i18n_view_on_slideshare"),A,"h").write('" target="_blank"><span>').reference(A.get("i18n_view_on_slideshare"),A,"h").write("</span></a>")
}return p
})();
(function(){dust.register("profile_thumbnail_view",dust.cache["tl/apps/profile/treasury/profile_thumbnail_view"])
})();LI.define("JSONPRequest");
LI.JSONPRequest=function(){this._init.apply(this,arguments)
};
LI.JSONPRequest.prototype={_requests:0,_init:function(a,c){this.url=a;
c=(YAHOO.lang.isFunction(c))?{on:{success:c}}:c||{};
var b=c.on||{};
if(!b.success){b.success=this._defaultCallback(a,c)
}this._config=YAHOO.lang.merge({context:this,args:[],format:this._format,allowCache:false},c,{on:b})
},_defaultCallback:function(){},send:function(){var a=this,d=Array.prototype.slice.call(arguments),c=a._config,e=a._proxy||a._uniqid(),b;
if(c.allowCache){a._proxy=e;
a._requests++
}d.unshift(a.url,"LI.JSONP."+e);
b=c.format.apply(a,d);
if(!c.on.success){return a
}function f(g){return(YAHOO.lang.isFunction(g))?function(h){if(!c.allowCache||!--a._requests){delete LI.JSONP[e]
}g.apply(c.context,[h].concat(c.args));
clearTimeout(LI.JSONPReqTimers[e])
}:null
}LI.JSONP[e]=f(c.on.success);
YAHOO.util.Get.script(b,{onFailure:f(c.on.failure),onTimeout:f(c.on.timeout),timeout:c.timeout});
if(c.timeout>0){LI.JSONPReqTimers[e]=setTimeout(f(c.on.timeout),c.timeout)
}return a
},_format:function(a,b){return a.replace(/\{callback\}/,b)
},_uniqid:function(){return("LI"+this._S4()+this._S4()+"_"+this._S4()+"_"+this._S4()+"_"+this._S4()+"_"+this._S4()+this._S4()+this._S4())
},_S4:function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)
}};
if(!LI.JSONP){LI.JSONP={}
}if(!LI.JSONPReqTimers){LI.JSONPReqTimers={}
};(function(c,e){var d="ontouchstart" in document.documentElement?"touchend":"click",b=LI.Events.fire,a=e.trim;
e(document).on(d,".evt-dispatch",function(h){var g=e(this),f=a(g.data("event-id"));
h.preventDefault();
h.stopPropagation();
if(f&&!g.hasClass("disabled")){b(f,g)
}})
}(this,jQuery));(function(a,b){var d,c;
b(".media-cell").on("mouseenter",function(){if(!d){d=new Date().getTime()
}});
b(".media-cell").on("click",function(){if(!c){c=new Date().getTime();
WebTracking.trackUserAction("treasury_ux_hover",{time:c-d},true)
}});
b(document).unload(function(){if(d&&!c){WebTracking.trackUserAction("treasury_ux_hover",{time:0},true)
}else{if(!c){WebTracking.trackUserAction("treasury_ux_hover",{time:-5},true)
}}});
setTimeout(function(){if(d&&!c){WebTracking.trackUserAction("treasury_ux_hover",{time:-10},true)
}else{if(!c){WebTracking.trackUserAction("treasury_ux_hover",{time:-15},true)
}}},1800000)
}(this,jQuery));(function(d){var e=window.jQuery||d("jquery"),c=window._||d("underscore"),a=LIModules.imports("BaseControl"),b;
b=a.extend(function(h){var f=("placeholder" in document.createElement("input")),g={placeholderClass:"placeholder",preserveAttributes:["class","id","name","tabindex","title","placeholder"],clearOnFormSubmit:false};
return{init:function(n,l){var p=e(n),o=p.find(':input:not(:submit):not([type="hidden"])'),j=o.length,k;
this.$input=p;
if(j){for(var m=0;
m<j;
m++){k=new b(o[m],l)
}return false
}else{if(!p.is(":input:not(:submit)")||p.attr("placeholder")===undefined){return false
}}if(!f||(l&&l.forcePlaceholderSupported)){h.init.apply(this,arguments)
}},beforeDecoration:function(){this.$input=this._$el;
this.$form=this.$input.closest("form");
c.union(g.preserveAttributes,this._config.preserveAttributes);
this._config=c.defaults(this._config,g);
this.inputType=this.$input.attr("type");
this.placeholderText=this.$input.attr("placeholder");
if(this.$input.val()===""){this._addPlaceholderClass()
}if(this.inputType==="password"){this._generateField("text",false,false)
}if(this.$form&&this._config.clearOnFormSubmit){this.attachFormListener()
}},afterDecoration:function(){if(this.inputType!=="password"&&this.$input.val()===""){this.$input.val(this.placeholderText)
}},attachEventListeners:function(){if(this.inputType==="password"){this.$input.on("focus blur",this._onPassword)
}else{this.$input.on("focus blur paste",this._onText)
}},attachFormListener:function(){var i;
this.$form.off("submit.placeholder-toggle").on("submit.placeholder-toggle",c.bind(function(){i=this.$form.find("."+this._config.placeholderClass);
if(i.length){i.val("")
}},this))
},_onText:function(i){if(i.type==="focus"&&this.$input.val()===this.placeholderText){this._removePlaceholderClass();
this.$input.val("")
}if(i.type==="blur"&&this.$input.val()===""){this._addPlaceholderClass();
this.$input.val(this.placeholderText)
}},_onPassword:function(i){if(i.type==="focus"&&this.$input.val()===this.placeholderText&&this.$input.attr("type")==="text"){this._generateField("password",true,true);
this._removePlaceholderClass()
}if(i.type==="blur"&&this.$input.val()===""){this._generateField("text",false,true);
this._addPlaceholderClass()
}},_generateField:function(o,k,n){var q=e('<input type="'+o+'" />'),l=this._config.preserveAttributes,j=l.length,p,m;
for(m=0;
m<j;
m++){p=l[m];
q.attr(p,this.$input.attr(p))
}this.$input.replaceWith(q);
this.$input=q;
if(o==="text"){q.val(this.placeholderText)
}if(n){this.attachEventListeners()
}if(k){setTimeout(function(){q.focus()
},0)
}},_addPlaceholderClass:function(){this.$input.addClass(this._config.placeholderClass)
},_removePlaceholderClass:function(){this.$input.removeClass(this._config.placeholderClass)
}}
});
LIModules.exports("Placeholder",b)
}(window.require));(function(Q,H){var l="ontouchstart" in document.documentElement?"touchend":"click",aa=LI.Events,j=aa.bind,w=aa.fire,t=LI.htmlEncode,Z=Q.ShowMore,S=Q.XSS,B=function(ag){try{WebTracking.trackUserAction(ag)
}catch(ah){}},a,e="show-media-error",v="_treasuryId",q="_detail",G=13,A=419,s=202,V,O,o,F,g,X,y,ac,U,c,L,r,af,ae,m=0,I="disabled",T="hidden",C="selected",u="loading",d="show",z=H("body"),h=LI.browser,D,ab,W,N,R,n,M,P,f,K,b,x,k,p,ad,Y,J,E;
function i(){a=LI.TREASURY_CONF;
af=a.i18n;
r=a.url;
W=a.tracks;
ab=a.lix;
O=af.treasury_viewer_title;
o=af.treasury_error_rendering;
V=af.treasury_dialog_position;
F=af.error_posting_comment;
a.sessionAvatar=a.sessionAvatar?a.sessionAvatar:null;
if(ab.facelift){A=374;
s=187
}H(".treasury-container").siblings(".callout-container").remove();
R=document.body.style;
N=R.WebkitTransition!==undefined||R.MozTransition!==undefined||R.OTransition!==undefined||R.transition!==undefined;
ae=!(h.ie&&(h.ie6||h.ie7||h.ie8));
P=function(ai){var aj;
if(ab.newProfileEdit){return
}if(!c&&!J){J=true;
if(!D){D=new LI.RichViewer("",{data:c,carousel:{track:r.post_view_event},flag:r.flag,lix:a.lix})
}else{D.clearData()
}aj=r.get_all.replace("_offset",0).replace("_count",1000000).replace("_isFullView",1).replace("_section","");
aj=a.isNmp?aj.replace("_memberId",a.memberId):aj;
H.getJSON(aj,function(am){var ak,al;
if(am.status!=="ok"){k(af.error_fetching_full_view_data)
}else{c=am.content;
c.treasury_conf=a;
E=c.defaultAvatar;
if(c&&c.treasury.items){al=c.treasury.items;
ak=al.length;
while(ak--){f(al[ak])
}}c.sessionFullName=a.sessionFullName;
c.sessionAvatar=a.sessionAvatar;
c.sessionProfile=a.sessionProfile;
D.updateData(c);
if(typeof ai==="function"){ai()
}}J=false
})
}};
z.on("mouseenter",".treasury-open-item",P);
f=function(aq){var aj=aq.likes,am=aj&&aj.recentActors,al=aq.comments,ao="member:"+a.sessionId,ap=al&&al.recentComments,ak=a.selfView,an,ai;
if(ap){ai=al.totalComments;
al.totalComments=ai>0?ai:0;
an=ap.length;
while(an--){if(ak||ap[an].commenterId===ao){ap[an].deletable=true
}}K(ap);
al.showMoreComments=(ap.length<ai)
}else{aq.comments={}
}if(am){an=am.length;
while(an--){if(am[an].id===ao){am.splice(an,1);
break
}}}if(aj&&am&&am.length<3){aj.totalLikes=Math.min(am.length,aj.totalLikes)
}if(aj&&aj.totalLikes>0){switch(aj.totalLikes){case 1:if(aj.likedByCurrentUser){aj.i18n_like_link=aq.i18n_like_link_1;
aj.i18n_unlike_link=""
}else{aj.i18n_like_link=aj.i18n_like_link_3.replace("{0}",am[0].profile_link);
aj.i18n_unlike_link=aj.i18n_like_link_2.replace("{0}",am[0].profile_link)
}break;
case 2:if(aj.likedByCurrentUser){aj.i18n_like_link=aj.i18n_like_link_3.replace("{0}",am[0].profile_link);
aj.i18n_unlike_link=aj.i18n_like_link_2.replace("{0}",am[0].profile_link)
}else{aj.i18n_like_link=aj.i18n_like_link_5.replace("{0}",am[0].profile_link).replace("{1}",am[1].profile_link);
aj.i18n_unlike_link=aj.i18n_like_link_4.replace("{0}",am[0].profile_link).replace("{1}",am[1].profile_link)
}break;
case 3:if(aj.likedByCurrentUser){aj.i18n_like_link=aj.i18n_like_link_5.replace("{0}",am[0].profile_link).replace("{1}",am[1].profile_link);
aj.i18n_unlike_link=aj.i18n_like_link_4.replace("{0}",am[0].profile_link).replace("{1}",am[1].profile_link)
}else{aj.i18n_like_link=aj.i18n_like_link_7.replace("{0}",am[0].profile_link).replace("{1}",2);
aj.i18n_unlike_link=aj.i18n_like_link_6.replace("{0}",am[0].profile_link).replace("{1}",am[1].profile_link).replace("{2}",am[2].profile_link)
}break;
default:if(aj.likedByCurrentUser){aj.i18n_like_link=aj.i18n_like_link_7.replace("{0}",am[0].profile_link).replace("{1}",aj.totalLikes-2);
aj.i18n_unlike_link=aj.i18n_like_link_8.replace("{0}",am[0].profile_link).replace("{1}",am[1].profile_link).replace("{2}",aj.totalLikes-3)
}else{aj.i18n_like_link=aj.i18n_like_link_7.replace("{0}",am[0].profile_link).replace("{1}",aj.totalLikes-1);
aj.i18n_unlike_link=aj.i18n_like_link_8.replace("{0}",am[0].profile_link).replace("{1}",am[1].profile_link).replace("{2}",aj.totalLikes-2)
}break
}}else{aq.likes={totalLikes:0,i18n_like_link:aq.i18n_like_link_1,i18n_unlike_link:""}
}};
K=function(ai){if(ai){ai.sort(function(ak,aj){return ak.createdDate>aj.createdDate?1:(ak.createdDate<aj.createdDate?-1:0)
})
}};
k=function(ai){w(e,ai)
};
p=function(aj){var ai;
if(aj.length>1&&aj.charAt(0)==="B"){ai=parseInt(aj.substr(1),10)
}return ai
};
b=function(aj){var ai,ak;
ai=H(".social-integration .comment-counter .counter");
ak=(parseInt(ai.text().replace(/\(|\)/,""),10)||0)+(aj?1:-1);
ai.text(ak?"("+ak+")":"")
};
x=function(ai){H.ajax({type:"POST",url:r.post_view_event.replace(v,ai)})
};
Y=function(ak){var aj=c&&c.treasury&&c.treasury.items,ai=aj&&aj.length;
while(ai--){if(aj[ai].meta.id===ak){return{item:aj[ai],index:ai}
}}return null
};
if(a.selfView){j("media-item-changed",function(ai){var aj;
if(c){M=true;
c=null
}P()
});
j("media-item-removed",function(ai){var aj;
if(c){aj=Y(ai.id);
if(aj){c.treasury.items.splice(aj.index,1);
c.treasury.num--;
if(D){D.clearData();
D.updateData(c)
}}}})
}j("treasury-open-item",function(ai){if(a.isNmp){c=undefined;
P(function(){D.open(ai)
})
}});
j("treasury-flag-item",function(ak){var ai=H("#dialog-wrapper.treasury-dialog"),al=ai.find(".carousel .evt-dispatch.selected").data("item-id"),aj=ak.hasClass("inappropriate")?"inappropriate":"copyright";
H.ajax(r.flag.replace(v,al).replace(q,aj),{dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(){var am;
if(!H.support.opacity){am=ai.find("iframe");
if(am.length){am.addClass("stealth");
ai.find(".media-mask").addClass("opaque")
}}ai.find(".media-mask, .flagged-content, .undo-action").removeClass("stealth");
ai.find(".do-action").addClass("stealth");
if(aj==="copyright"){LI.popup(ak.attr("href"),{})
}},error:function(){w(e,af.error_removing_data)
}})
});
j("treasury-undo-flag-item",function(){var ai=H("#dialog-wrapper.treasury-dialog"),aj;
if(!H.support.opacity){aj=ai.find("iframe");
if(aj.length){aj.removeClass("stealth");
ai.find(".media-mask").removeClass("opaque")
}}ai.find(".media-mask, .flagged-content, .undo-action").addClass("stealth");
ai.find(".do-action").removeClass("stealth")
});
j("see-all-likers",function(al){var ak=al.closest("ul").data("all-liker-url"),ai=al.parent(),am=ai.next(),aj="loaded";
if(!am.hasClass(aj)){H.ajax(ak,{type:"GET",dataType:"html",success:function(an){an=H(an).appendTo(am);
am.addClass(aj).show();
ai.hide();
am.find(".show-less").addClass("evt-dispatch").attr("data-event-id","show-less-likes")
},error:function(){}})
}else{am.show();
ai.hide()
}});
j("show-less-likes",function(aj){var ak=aj.parent(),ai=ak.prev();
ak.hide();
ai.show()
});
function ag(aj,ak){var al=aj.find(".media-wrapper").not(".media-add-frame"),ai;
if(!ak){al=al.not(".stealth")
}ai=al.length-2;
return(A+s*ai)
}j("treasury-view-more",function(ai){var am=ai.siblings(".treasury-container"),aw=ag(am,true),au=ai.siblings(".hidden-view-collapse"),ap=ab.pagination,av=am.attr("data-section-id")||"summary",al=am.find(".media-cell").not(".media-add-frame").length,ar,aj,ak=p(ab.pageSize)||100,at=p(ab.prefetchThreshold)||2,ao="no-server-fetch";
function an(az,ax){var aA,ay;
if(N){aA=am.css("height");
am.css("height",aA);
ay=parseInt(aA,10)+(s*az);
setTimeout(function(){am.addClass("animate").css("height",ay+"px");
if(ax){ai.addClass("animate transparent active")
}if(au.hasClass("transparent")){au.removeClass("animate transparent").addClass("active")
}},0)
}}function aq(az,ay,aA){var ax=r.get_all.replace("_offset",az).replace("_count",ak).replace("_isFullView",0).replace("_section",encodeURIComponent(ay));
ax=a.isNmp?ax.replace("_memberId",a.memberId):ax;
am[0].isFetching=true;
am[0].showNextDeferred=false;
H.getJSON(ax,function(aC){var aB;
if(aC.status!=="ok"){k(af.error_fetching_full_view_data);
am[0].isFetching=false;
am[0].showNextDeferred=false
}else{aB=aC.content.treasury;
dust.render("treasury_view_v2",aB,function(aE,aD){if(aE){k(o)
}else{aA({rows:H(aD).children(".media-wrapper").not(".media-add-frame"),hasMore:aB.hasMore})
}am[0].isFetching=false;
am[0].showNextDeferred=false
})
}})
}if(ap){ar=am.find(".media-wrapper.stealth").not(".media-add-frame");
aj=ar.slice(0,2);
if(aj.length){an(aj.length,ar.length<=2&&am.hasClass(ao));
aj.removeClass("stealth");
if(ar.length<(2+2*at)&&!am.hasClass(ao)&&!am[0].isFetching){aq(al,av,function(ax){ax.rows.addClass("stealth");
ax.rows.insertAfter(am.children(".media-wrapper").not(".media-add-frame").last());
if(!ax.hasMore){am.addClass(ao)
}if(am[0].showNextDeferred){ar=am.find(".media-wrapper.stealth").not(".media-add-frame");
aj=ar.slice(0,2);
an(aj.length,ar.length<=2&&am.hasClass(ao));
aj.removeClass("stealth");
am[0].showNextDeferred=false
}})
}}else{if(!am[0].isFetching){aq(al,av,function(ax){an(ax.rows.length,!ax.hasMore);
ax.rows.insertAfter(am.children(".media-wrapper").not(".media-add-frame").last());
if(!ax.hasMore){am.addClass(ao)
}})
}else{am[0].showNextDeferred=true
}}}else{ai.addClass("stealth");
ai.siblings(".hidden-view-less").removeClass("stealth");
am.find(".media-wrapper").removeClass("stealth");
if(N&&!am.hasClass("adding")){am.css("height",A+"px");
setTimeout(function(){am.addClass("animate").css("height",aw+"px")
},50)
}}});
j("treasury-view-less",function(ak){var al=ak.siblings(".treasury-container"),aj=ak.siblings(".hidden-view-more"),ai=ab.pagination;
if(ai){ak.addClass("animate transparent active");
aj.addClass("active").removeClass("animate transparent")
}else{ak.addClass("stealth");
aj.removeClass("stealth");
if(N){al.css("height",ag(al)+"px");
setTimeout(function(){al.addClass("animate");
al.css("height",A+"px")
},50)
}else{al.find(".media-wrapper").slice(2).addClass("stealth")
}}});
j("treasury-social-like",function(an){var aj="like",ai="unlike",al,am;
an.addClass(u);
function ak(){var ao;
ao=an.find(".counter");
am=parseInt(ao.text().replace(/\(|\)/,""),10)||0;
if(an.hasClass(aj)){an.removeClass(aj).addClass(ai);
am--;
al=an.attr("data-url-unlike")
}else{an.removeClass(ai).addClass(aj);
am++;
al=an.attr("data-url-like")
}ao.text((am>0)?"("+am+")":"")
}ak();
H.ajax(al,{type:"POST",dataType:"JSON",success:function(){var ao;
an.removeClass(u);
ao=an.closest(".social-integration").find(".comments > ul .likes,.comments > ul .unlikes");
ao.toggle(T);
c.likes=c.likes||{};
c.likes.totalLikes=am||0;
c.likes.likedByCurrentUser=!c.likes.likedByCurrentUser
},error:function(){an.removeClass(u);
ak()
},headers:{"X-Requested-With":"XMLHttpRequest","X-IsAJAXForm":1}})
});
j("treasury-social-comment",function(ai){ai.closest(".social-integration").find("textarea").focus()
});
j("delete-treasury-comment",function(al){var aj=al.attr("data-url"),ai=H(".social-integration .comment-counter .counter"),ak,am=al.closest("li");
if(aj.length){H.ajax(aj,{type:"POST",dataType:"JSON"}).done(function(){al.remove();
am.slideUp(function(){H(this).remove();
c.comments=c.comments||{};
c.comments.totalComments=(c.comments.totalComments||1)-1;
c.comments.recentComments=c.comments.recentComments||[];
_.each(c.comments.recentComments,function(ao,an){if(ao.url__remove_comment===aj){c.comments.recentComments.splice(an,1)
}});
ak=c.comments.totalComments;
ai.text(ak?"("+ak+")":"")
})
}).fail(function(){am.find(".delete-error").removeClass(T);
w(e,af.error_deleting_comment)
})
}else{}});
j("show-more-treasury-comments",function(ak){var ai=ak.data("url"),al=(ab.socialCommentShowMoreCount+"").replace("show_",""),am=parseInt(al,10),an=c.comments,aj,ao,ap,aq;
am=am>0&&am<1000?am:25;
ap=an.totalComments;
ao=ao>0&&ao<am?ao:am;
aj=ap-an.recentComments.length-ao;
aq=false;
ai=ai.replace("_start",aj).replace("_count",ao).replace("_total",ap).replace("_reverseChron",aq);
ak.addClass(u);
H.ajax(ai,{success:function(aO){var aI,aJ,aG,aA,aC,at,aL,aM,aB,av,aK,aD,ay,ar,aN,aE,ax,au,aw,az,aF=aO&&aO.content&&aO.content.commentsWithActor,aH=aF&&aF.comments;
ak.removeClass(u);
aD=ak.parent().parent();
if(!aO||aO.status!=="ok"||!aO.content||!aF||!aH||!aH.elements||!aH.elements.length){aD.hide();
return k(af.error_showing_more_comments)
}aI=aH.elements;
aJ=aI.length;
aA=H(".social-integration .comments ul");
aC=aA.children(".hidden.comment").last();
ay=c.comments.recentComments;
while(aJ--){aK=aI[aJ];
aG=aK.message;
aL=aK.threadId;
aM=aK.commentId||(aK.urnMap&&aK.urnMap.id);
if(H('a[data-url*="commentId='+aM+'"]').length){continue
}at=aC.clone();
ar=t(aK.commenter.url);
aw=aK.commenter;
aN=aw&&aw.image?t(aw.image.url):E;
aE=t(aK.commenter.title);
az=aw.properties;
ax=aw.link__delete_comment;
au=aw.creation_timestamp;
if(ab.commentDeletion==="enabled"){aB=at.find(".delete");
av=aB.data("url").replace("_threadUrn",aL).replace("_commentId",aM);
aB.attr("data-url",av)
}at.find(".comment-avatar").attr("href",ar);
at.find(".comment-avatar img").attr("alt",aE).attr("src",aN);
at.find("a.commenter").text(aE);
at.find(".timestamp").text(au);
at.find("q").text(aG);
at.removeClass(T);
aD.after(at);
ay["push"]({deletable:true,commenter:{url:aK.url,image:aK.commenter.image,title:aK.commenter.title,fmt__creation_timestamp:au,url__remove_comment:ax},message:aG})
}if(ay.length>=c.comments.totalComments||!aI.length){aD.hide();
c.comments.showMoreComments=false
}},error:function(){ak.removeClass(u);
k(af.error_showing_more_comments)
}})
});
z.on("otransitionend transitionend webkitTransitionEnd",".treasury-container",function(){var ai=H(this);
ai.removeClass("animate");
if(ai.css("height")===(A+"px")){ai.find(".media-wrapper").slice(2).addClass("stealth")
}ai.css("height","")
});
H("button.dialog-close").on(function(){H("html").css("overflow","auto");
H("html").removeAttr("scrolling")
});
function ah(){var ak=Q.location.href,aj=ak.match(/mediaId=(\d+)/),al,ai;
if(aj&&aj[1]){al=aj[1];
ai=H(".media-cell[data-item-id="+al+"]");
if(ai.length){if(!ai.is(":visible")){ai.parent().parent().parent().find(".hidden-view-more a").trigger(l)
}ai.trigger(l)
}}}ah()
}j(e,function(ag){if(H.fn.ProfileEdit){H.fn.ProfileEdit.showGlobalAlert(ag,"failure")
}else{LI.injectAlert(ag,"failure")
}});
j("treasury-share-link",function(ah){var ag=H(".share-link-input");
ah.closest(".actions").toggleClass("show-share-link-input");
ag.toggleClass(d);
setTimeout(function(){ag.select()
},500)
});
H.fn.ready(i)
}(this,jQuery));(function(){dust.register("tl/apps/profile/v2/embed/treasury_edit",N);
function N(a4,a3){return a4.write('<div class="treasury-edit-form-container"><form class="standard-form stacked treasury-edit" name="').reference(a3.get("name"),a3,"h").write('" method="').reference(a3.get("method"),a3,"h").write('" action="').reference(a3.get("action"),a3,"h").write('"><div class="triangle"></div><div class="error-msg">').helper("select",a3,{"block":M},{"key":a3.get("errorType")}).write('</div><ul><li><div class="fieldgroup"><span class="error"></span></div></li> ').helper("eq",a3,{"else":F,"block":av},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).notexists(a3.get("add_new"),a3,{"block":D},null).write("</ul>").helper("eq",a3,{"block":d},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).write('<p class="actions media-edit-section">').helper("eq",a3,{"block":c},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).write('<button class="save-btn btn-primary evt-dispatch" type="button" value="').section(a3.get("i18n"),a3,{"block":b},null).write('" data-event-id="media-save" data-id="').section(a3.get("html"),a3,{"block":a},null).write('">').section(a3.get("i18n"),a3,{"block":a1},null).write("</button>").helper("eq",a3,{"block":aY},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).write('<button class="continue-btn btn-primary" type="button">').section(a3.get("i18n"),a3,{"block":aU},null).write('</button><button class="btn-secondary btn-cancel evt-dispatch" type="button" data-event-id="media-cancel">').section(a3.get("i18n"),a3,{"block":aS},null).write('</button><button class="btn-media-remove evt-dispatch" type="button" data-event-id="media-remove" data-id="').section(a3.get("html"),a3,{"block":aQ},null).write('"  ').exists(a3.get("publishToSlideShareLix"),a3,{"block":aI},null).write(">").section(a3.get("i18n"),a3,{"block":aH},null).write("</button>").helper("eq",a3,{"block":aG},{"key":a3.getPath(false,["lix","uploadFileErrorForm"]),"value":"enabled"}).write("</p>").section(a3.get("html"),a3,{"block":aF},null).write('<div class="screen"></div></form><div class="progress-indicator"></div></div>')
}function M(a4,a3){return a4.helper("eq",a3,{"block":L},{"value":"type"}).helper("eq",a3,{"block":J},{"value":"size"}).helper("default",a3,{"block":H},null)
}function L(a4,a3){return a4.write('<p class="type-error">').section(a3.get("i18n"),a3,{"block":K},null).write("</p>")
}function K(a4,a3){return a4.reference(a3.get("error_upload_unsupported_file_type"),a3,"h",["et","s"])
}function J(a4,a3){return a4.write('<p class="size-error">').section(a3.get("i18n"),a3,{"block":I},null).write("</p>")
}function I(a4,a3){return a4.reference(a3.get("error_upload_size_exceeded"),a3,"h",["et","s"])
}function H(a4,a3){return a4.write("<p>").section(a3.get("i18n"),a3,{"block":G},null).write("</p>")
}function G(a4,a3){return a4.reference(a3.get("error_general_error"),a3,"h",["et","s"])
}function F(a4,a3){return a4.exists(a3.get("url"),a3,{"block":E},null)
}function E(a4,a3){return a4.write('<li><label for="media-url" class="media-input">').exists(a3.get("add_new"),a3,{"block":aX},null).notexists(a3.get("add_new"),a3,{"block":aK},null).write('</label><div class="fieldgroup"><input onpaste="javascript:LI.Events.fire(\'media-url-paste\', this);" type="text" name="title" value="').reference(a3.get("url"),a3,"h").write('" id="media-url" class="inpt media-url').exists(a3.get("add_new"),a3,{"block":aD},null).write('" ').notexists(a3.get("add_new"),a3,{"block":aB},null).write(' /></div><span class="media-tip">').section(a3.get("i18n"),a3,{"block":az},null).write('</span><a href="').reference(a3.get("providers"),a3,"h").write('" class="providers" data-event-id="media-providers">').section(a3.get("i18n"),a3,{"block":ax},null).write("</a></li>")
}function aX(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":aV},null).write('<span class="error">').exists(a3.get("treasurygeneralerror"),a3,{"block":aT},null).exists(a3.get("treasuryurlnotsupport"),a3,{"block":aP},null).exists(a3.get("treasuryurlinvalid"),a3,{"block":aM},null).write("</span>")
}function aV(a4,a3){return a4.reference(a3.get("edit_add_a_link"),a3,"h")
}function aT(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":aR},null)
}function aR(a4,a3){return a4.reference(a3.get("error_general_error"),a3,"h")
}function aP(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":aN},null)
}function aN(a4,a3){return a4.reference(a3.get("error_url_not_supported"),a3,"h")
}function aM(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":aL},null)
}function aL(a4,a3){return a4.reference(a3.get("error_invalid_url"),a3,"h")
}function aK(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":aJ},null)
}function aJ(a4,a3){return a4.reference(a3.get("edit_link"),a3,"h")
}function aD(a4,a3){return a4.write(" media-add-new")
}function aB(a4,a3){return a4.write('disabled="disabled"')
}function az(a4,a3){return a4.reference(a3.get("edit_add_a_link_info"),a3,"h")
}function ax(a4,a3){return a4.reference(a3.get("edit_add_a_link_providers"),a3,"h")
}function av(a4,a3){return a4.exists(a3.get("add_url"),a3,{"block":at},null)
}function at(a4,a3){return a4.write('<li><label for="media-url" class="media-input">').exists(a3.get("add_new"),a3,{"block":ar},null).notexists(a3.get("add_new"),a3,{"block":U},null).write('</label><div class="fieldgroup"><input onpaste="javascript:LI.Events.fire(\'media-url-paste\', this);" type="text" name="title" value="').reference(a3.get("url"),a3,"h").write('" id="media-url" class="inpt media-url').exists(a3.get("add_new"),a3,{"block":R},null).write('" ').notexists(a3.get("add_new"),a3,{"block":Q},null).write(' /></div><span class="media-tip">').section(a3.get("i18n"),a3,{"block":P},null).write('</span><a href="').reference(a3.get("providers"),a3,"h").write('" class="providers" data-event-id="media-providers">').section(a3.get("i18n"),a3,{"block":O},null).write("</a></li>")
}function ar(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":aq},null).write('<span class="error">').exists(a3.get("treasurygeneralerror"),a3,{"block":ap},null).exists(a3.get("treasuryurlnotsupport"),a3,{"block":ac},null).exists(a3.get("treasuryurlinvalid"),a3,{"block":Y},null).write("</span>")
}function aq(a4,a3){return a4.reference(a3.get("edit_add_a_link"),a3,"h")
}function ap(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":ao},null)
}function ao(a4,a3){return a4.reference(a3.get("error_general_error"),a3,"h")
}function ac(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":aa},null)
}function aa(a4,a3){return a4.reference(a3.get("error_url_not_supported"),a3,"h")
}function Y(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":W},null)
}function W(a4,a3){return a4.reference(a3.get("error_invalid_url"),a3,"h")
}function U(a4,a3){return a4.section(a3.get("i18n"),a3,{"block":S},null)
}function S(a4,a3){return a4.reference(a3.get("edit_link"),a3,"h")
}function R(a4,a3){return a4.write(" media-add-new")
}function Q(a4,a3){return a4.write('disabled="disabled"')
}function P(a4,a3){return a4.reference(a3.get("edit_add_a_link_info"),a3,"h")
}function O(a4,a3){return a4.reference(a3.get("edit_add_a_link_providers"),a3,"h")
}function D(a4,a3){return a4.write('<li class="photo-section"><fieldset><label for="media-photo">').section(a3.get("i18n"),a3,{"block":C},null).write('</label><ul><li><label class="checkbox"><input type="checkbox" name="photo" checked="true" id="media-photo">').section(a3.get("i18n"),a3,{"block":B},null).write('</label></li></ul></fieldset></li><li><label for="').section(a3.get("html"),a3,{"block":A},null).write('" class="media-input">').section(a3.get("i18n"),a3,{"block":y},null).write('<abbr title="').section(a3.get("i18n"),a3,{"block":x},null).write('" class="required">*</abbr><span class="error"></span></label><div class="fieldgroup">').section(a3.get("html"),a3,{"block":w},null).write('</div></li><li><label for="').section(a3.get("html"),a3,{"block":u},null).write('">').section(a3.get("i18n"),a3,{"block":s},null).write('</label><div class="fieldgroup">').section(a3.get("html"),a3,{"block":r},null).write('<span class="error"></span></div></li>').exists(a3.get("publishToSlideShareLix"),a3,{"block":p},null).exists(a3.get("enableMovingTreasuryObject"),a3,{"block":j},null)
}function C(a4,a3){return a4.reference(a3.get("edit_photo"),a3,"h")
}function B(a4,a3){return a4.reference(a3.get("edit_include"),a3,"h",["et","s"])
}function A(a4,a3){return a4.section(a3.get("customTitle"),a3,{"block":z},null)
}function z(a4,a3){return a4.reference(a3.get("id"),a3,"h")
}function y(a4,a3){return a4.reference(a3.get("edit_title"),a3,"h")
}function x(a4,a3){return a4.reference(a3.get("edit_required_field"),a3,"h")
}function w(a4,a3){return a4.section(a3.get("customTitle"),a3,{"block":v},null)
}function v(a4,a3){return a4.write('<input class="media-title" type="text" autocomplete="on" name="').reference(a3.get("name"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" id="').reference(a3.get("id"),a3,"h").write('" data-original-text="').reference(a3.get("value"),a3,"h").write('" />')
}function u(a4,a3){return a4.section(a3.get("customDescription"),a3,{"block":t},null)
}function t(a4,a3){return a4.reference(a3.get("id"),a3,"h")
}function s(a4,a3){return a4.reference(a3.get("edit_description"),a3,"h")
}function r(a4,a3){return a4.section(a3.get("customDescription"),a3,{"block":q},null)
}function q(a4,a3){return a4.write('<textarea class="media-description" name="').reference(a3.get("name"),a3,"h").write('" id="').reference(a3.get("id"),a3,"h").write('" rows="6" cols="60" class="txtarea">').reference(a3.get("value"),a3,"h").write("</textarea>")
}function p(a4,a3){return a4.section(a3.get("html"),a3,{"block":o},null)
}function o(a4,a3){return a4.section(a3.get("publishToSlideShare"),a3,{"block":n},null)
}function n(a4,a3){return a4.write('<li><input class="publish-to-slideshare" type="checkbox" id="').reference(a3.get("id"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" ').helper("eq",a3,{"block":m},{"key":a3.get("checkedByDefault"),"value":"true","type":"boolean"}).write('/><label for="').reference(a3.get("id"),a3,"h").write('">').section(a3.get("i18n"),a3,{"block":l},null).write('</label><a href="http://www.slideshare.net/about/" target="_blank" class="slideshare-learn-more">').section(a3.get("i18n"),a3,{"block":k},null).write('</a><span class="error"></span></li>')
}function m(a4,a3){return a4.write("checked")
}function l(a4,a3){return a4.reference(a3.get("publish_to_slideshare_label"),a3,"h")
}function k(a4,a3){return a4.reference(a3.get("slideshare_learn_more_label"),a3,"h")
}function j(a4,a3){return a4.section(a3.get("html"),a3,{"block":i},null)
}function i(a4,a3){return a4.section(a3.get("newSection"),a3,{"block":h},null)
}function h(a4,a3){return a4.write("<li><label>").section(a3.get("i18n"),a3,{"block":g},null).write('</label><div class="fieldgroup section-select"><select type="').reference(a3.get("type"),a3,"h").write('" id="').reference(a3.get("id"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('">').section(a3.get("options"),a3,{"block":f},null).write("</select></div></li>")
}function g(a4,a3){return a4.reference(a3.get("edit_move_prompt"),a3,"h")
}function f(a4,a3){return a4.write('<option value="').reference(a3.get("value"),a3,"h").write('" ').exists(a3.get("selected"),a3,{"block":e},null).write(' value="').reference(a3.get("value"),a3,"h").write('">').reference(a3.get("label"),a3,"h").write("</option>")
}function e(a4,a3){return a4.write('selected class="original"')
}function d(a4,a3){return a4.write('<div class="upload-again"></div>')
}function c(a4,a3){return a4.write('<span class="lixUploadFile">')
}function b(a4,a3){return a4.reference(a3.get("edit_btn_save"),a3,"h")
}function a(a4,a3){return a4.section(a3.get("treasuryID"),a3,{"block":a2},null)
}function a2(a4,a3){return a4.reference(a3.get("value"),a3,"h")
}function a1(a4,a3){return a4.exists(a3.get("fetched"),a3,{"else":a0,"block":aZ},null)
}function a0(a4,a3){return a4.reference(a3.get("edit_btn_save"),a3,"h")
}function aZ(a4,a3){return a4.reference(a3.get("edit_btn_add_to_profile"),a3,"h")
}function aY(a4,a3){return a4.write('<button class="upload-file-btn btn-primary" type="button">').section(a3.get("i18n"),a3,{"block":aW},null).write("</button>")
}function aW(a4,a3){return a4.reference(a3.get("upload_file"),a3,"h")
}function aU(a4,a3){return a4.reference(a3.get("edit_btn_continue"),a3,"h")
}function aS(a4,a3){return a4.reference(a3.get("edit_btn_cancel"),a3,"h")
}function aQ(a4,a3){return a4.section(a3.get("treasuryID"),a3,{"block":aO},null)
}function aO(a4,a3){return a4.reference(a3.get("value"),a3,"h")
}function aI(a4,a3){return a4.write('data-ssSlideshowId="').reference(a3.get("ssSlideshowId"),a3,"h").write('"')
}function aH(a4,a3){return a4.reference(a3.get("edit_btn_remove"),a3,"h")
}function aG(a4,a3){return a4.write("</span>")
}function aF(a4,a3){return a4.section(a3.get("timestamp"),a3,{"block":aE},null).section(a3.get("goback"),a3,{"block":aC},null).section(a3.get("useJsonResponse"),a3,{"block":aA},null).section(a3.get("locale"),a3,{"block":ay},null).section(a3.get("sourceAlias"),a3,{"block":aw},null).section(a3.get("nudgeID"),a3,{"block":au},null).section(a3.get("csrfToken"),a3,{"block":ah},null).section(a3.get("treasuryID"),a3,{"block":ag},null).section(a3.get("treasury"),a3,{"block":af},null).section(a3.get("code"),a3,{"block":ae},null).section(a3.get("currentSection"),a3,{"block":ad},null).section(a3.get("slideshow"),a3,{"block":ab},null).section(a3.get("customTitle"),a3,{"block":Z},null).section(a3.get("customDescription"),a3,{"block":X},null).section(a3.get("isImage"),a3,{"block":V},null).exists(a3.get("publishToSlideShareLix"),a3,{"block":T},null).write('<input id="memberId" value="').reference(a3.get("memberId"),a3,"h").write('" name="id" type="hidden"/><input id="sectionId" value="').reference(a3.get("sectionId"),a3,"h").write('" name="section" type="hidden"/><input type="submit" class="hidden" name="submit" value="').section(a3.get("i18n"),a3,{"block":ai},null).write('"/>')
}function aE(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function aC(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function aA(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function ay(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function aw(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function au(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function ah(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function ag(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function af(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function ae(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function ad(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden">')
}function ab(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function Z(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function X(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function V(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function T(a4,a3){return a4.section(a3.get("publishToSlideShareHidden"),a3,{"block":an},null).section(a3.get("ssSlideshowId"),a3,{"block":am},null).section(a3.get("ssSlideshowUrl"),a3,{"block":al},null).section(a3.get("ssMoveToEmail"),a3,{"block":ak},null).section(a3.get("newSlideShareAccountCreated"),a3,{"block":aj},null)
}function an(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function am(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function al(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function ak(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function aj(a4,a3){return a4.write('<input id="').reference(a3.get("id"),a3,"h").write('" value="').reference(a3.get("value"),a3,"h").write('" name="').reference(a3.get("name"),a3,"h").write('" type="hidden"/>')
}function ai(a4,a3){return a4.reference(a3.get("edit_btn_save"),a3,"h")
}return N
})();
(function(){dust.register("treasury_edit",dust.cache["tl/apps/profile/v2/embed/treasury_edit"])
})();(function(){dust.register("tl/apps/profile/treasury/reorder_item",e);
function e(h,g){return h.helper("jsControl",g,{"block":d},{"name":"Sortable.Section"})
}function d(h,g){return h.write("{existingDragHandlePath: ").exists(g.get("dragHandle"),g,{"else":c,"block":b},null).write(",serverValue: '").reference(g.get("itemId"),g,"h",["h","j","s"]).write("',group: '").reference(g.get("group"),g,"h",["h","j","s"]).write("',sortableObject: LI.TreasurySortable,additionalProxyClass: ").exists(g.get("additionalProxyClass"),g,{"else":a,"block":f},null).write("}")
}function c(h,g){return h.write("'.edit-order'")
}function b(h,g){return h.write("'").reference(g.get("dragHandle"),g,"h",["h","j","s"]).write("'")
}function a(h,g){return h.write("'background-section-drag-proxy'")
}function f(h,g){return h.reference(g.get("additionalProxyClass"),g,"h")
}return e
})();
(function(){dust.register("reorder_item",dust.cache["tl/apps/profile/treasury/reorder_item"])
})();(function(){dust.register("tl/apps/profile/treasury/treasury_add_link",p);
var w={"bigPromo":o};
function p(E,D){D=D.shiftBlocks(w);
return E.exists(D.get("showBigPromo"),D,{"block":l},null).exists(D.get("showSmallPromo"),D,{"block":C},null)
}function o(E,D){D=D.shiftBlocks(w);
return E.write('<div class="treasury-promo">').helper("eq",D,{"block":m},{"key":f,"value":"control"}).write('<div class="media-wrapper"><div class="media-item media-wrapper-3row media-cell"><div class="outer"><span class="media-image-wrapper"><img src="').reference(D.get("spacer"),D,"h").write('" data-li-src="').reference(D.get("bg_promo_1"),D,"h").write('" class="media-image lazy-load" alt=""/><span class="centering-helper"></span></span></div><div class="media-desc"><div class="text-box"><p>').reference(D.get("promo_text_1"),D,"h").write('</p></div></div></div><div class="media-item media-wrapper-3row media-cell"><div class="outer"><span class="media-image-wrapper"><img src="').reference(D.get("spacer"),D,"h").write('" data-li-src="').reference(D.get("bg_promo_2"),D,"h").write('" class="media-image lazy-load" alt=""/><span class="centering-helper"></span></span></div><div class="media-desc"><div class="text-box"><p>').reference(D.get("promo_text_2"),D,"h").write('</p></div></div></div><div class="media-item media-wrapper-3row media-cell"><div class="outer"><span class="media-image-wrapper"><img src="').reference(D.get("spacer"),D,"h").write('" data-li-src="').reference(D.get("bg_promo_3"),D,"h").write('" class="media-image lazy-load" alt=""/><span class="centering-helper"></span></span></div><div class="media-desc"><div class="text-box"><p>').reference(D.get("promo_text_3"),D,"h").write('</p></div></div></div></div><div class="').helper("eq",D,{"else":e,"block":d},{"key":c,"value":"B"}).write('">').helper("eq",D,{"block":v},{"key":u,"value":"B"}).write('<form action="" method="POST" name="treasury-add" class="standard-form"><span class="error"></span>').helper("ne",D,{"block":t},{"key":s,"value":"B"}).write('<label for="url" class="a11y-hidden-label">').reference(D.get("i18n_add_link_to_content"),D,"h",["s"]).write('</label><input type="text" onpaste="javascript:LI.Events.fire(\'media-url-paste\', this);" autocomplete="off" placeholder="http://" name="url" class="media-url media-url-promo" />').helper("eq",D,{"else":r,"block":q},{"key":n,"value":"B"}).write('</div><a class="x-close evt-dispatch" data-event-id="media-close-promo" href="#">&nbsp;</a><div class="progress-indicator"></div></div>')
}function m(E,D){D=D.shiftBlocks(w);
return E.helper("eq",D,{"else":k,"block":i},{"key":g,"value":"B"})
}function k(E,D){D=D.shiftBlocks(w);
return E.write('<p class="prompt">').reference(D.get("i18n_media_get_discovered"),D,"h",["s"]).write('<img src="').reference(D.get("spacer"),D,"h").write('" data-li-src="').reference(D.get("bg_arw_drawn"),D,"h").write('" class="lazy-load" alt=""/>')
}function i(E,D){D=D.shiftBlocks(w);
return E.write('<p class="prompt">').reference(D.get("i18n_media_get_discovered_upload"),D,"h",["s"]).write('<img src="').reference(D.get("spacer"),D,"h").write('" data-li-src="').reference(D.get("bg_arw_drawn"),D,"h").write('" class="lazy-load" alt=""/>')
}function g(E,D){D=D.shiftBlocks(w);
return E.reference(D.get("lix_treasury_upload"),D,"h")
}function f(E,D){D=D.shiftBlocks(w);
return E.reference(D.get("lix_treasury_viewer"),D,"h")
}function e(E,D){D=D.shiftBlocks(w);
return E.write("treasury-form-container")
}function d(E,D){D=D.shiftBlocks(w);
return E.write("treasury-form-container-upload")
}function c(E,D){D=D.shiftBlocks(w);
return E.reference(D.get("lix_treasury_upload"),D,"h")
}function v(E,D){D=D.shiftBlocks(w);
return E.write('<div class="upload-form-container">')
}function u(E,D){D=D.shiftBlocks(w);
return E.reference(D.get("lix_treasury_upload"),D,"h")
}function t(E,D){D=D.shiftBlocks(w);
return E.write('<p class="prompt">').reference(D.get("i18n_media_form_prompt"),D,"h",["s"]).write("</p>")
}function s(E,D){D=D.shiftBlocks(w);
return E.reference(D.get("lix_treasury_upload"),D,"h")
}function r(E,D){D=D.shiftBlocks(w);
return E.write('<a href="').reference(D.get("providers"),D,"h").write('" class="providers" title="').reference(D.get("i18n_media_form_providers_title"),D,"h").write('" data-event-id="media-providers">').reference(D.get("i18n_media_form_providers"),D,"h",["s"]).write("</a></form>")
}function q(E,D){D=D.shiftBlocks(w);
return E.write('</form></div><span class="or-separator">').reference(D.get("i18n_media_Add_Link_Or_Upload_File_Separator"),D,"h",["s"]).write('</span><button class="treasury-file-upload-btn" type="button"><label for="slideshare-file-input" class="treasury-file-upload">').reference(D.get("i18n_upload_file"),D,"h",["s"]).write('</label></button><a href="').reference(D.get("providers"),D,"h").write('" class="providers" title="').reference(D.get("i18n_media_form_providers_title"),D,"h").write('" data-event-id="media-providers">').reference(D.get("i18n_media_form_providers"),D,"h",["s"]).write("</a>")
}function n(E,D){D=D.shiftBlocks(w);
return E.reference(D.get("lix_treasury_upload"),D,"h")
}function l(E,D){D=D.shiftBlocks(w);
return E.helper("ne",D,{"else":j,"block":a},{"key":D.get("lix_treasury_callout"),"value":"B"})
}function j(E,D){D=D.shiftBlocks(w);
return E.helper("ne",D,{"block":h},{"key":b,"value":"add_media_callout"})
}function h(E,D){D=D.shiftBlocks(w);
return E.block(D.getBlock("bigPromo"),D,{},null)
}function b(E,D){D=D.shiftBlocks(w);
return E.reference(D.getPath(false,["global_requestParams","promoId"]),D,"h")
}function a(E,D){D=D.shiftBlocks(w);
return E.block(D.getBlock("bigPromo"),D,{},null)
}function C(E,D){D=D.shiftBlocks(w);
return E.write('<div class="treasury-add-link').helper("eq",D,{"block":B},{"key":A,"value":"B"}).write('">').helper("eq",D,{"else":z,"block":y},{"key":x,"value":"B"}).write("</div>")
}function B(E,D){D=D.shiftBlocks(w);
return E.write("-upload")
}function A(E,D){D=D.shiftBlocks(w);
return E.reference(D.get("lix_treasury_upload"),D,"h")
}function z(E,D){D=D.shiftBlocks(w);
return E.write('<a href="javascript:void(0)" class="media-add-promo evt-dispatch" data-event-id="media-add-promo" role="button">').reference(D.get("i18n_media_link"),D,"h",["s"]).reference(D.getPath(false,["i18n","media_link"]),D,"h").write('</a><a href="javascript:void(0)" class="x-close evt-dispatch" data-event-id="media-close-promo-bar" role="button">').reference(D.get("i18n_edit_add_a_link_close"),D,"h",["s"]).reference(D.getPath(false,["i18n","edit_add_a_link_close"]),D,"h").write("</a>")
}function y(E,D){D=D.shiftBlocks(w);
return E.write('<div class="treasury-add-link-inner"><div class="treasury-add-link-subsection treasury-add-link-left-subsection"><a href="javascript:void(0)" class="media-add-promo evt-dispatch" data-event-id="media-add-promo" role="button">').reference(D.get("i18n_add_link"),D,"h",["s"]).reference(D.getPath(false,["i18n","add_link"]),D,"h").write('</a></div><div class="treasury-add-link-subsection"><label for="slideshare-file-input" class="treasury-file-upload media-add-promo">').reference(D.get("i18n_upload_file"),D,"h",["s"]).reference(D.getPath(false,["i18n","upload_file"]),D,"h").write("</label></div></div>")
}function x(E,D){D=D.shiftBlocks(w);
return E.reference(D.get("lix_treasury_upload"),D,"h")
}return p
})();
(function(){dust.register("treasury_add_link",dust.cache["tl/apps/profile/treasury/treasury_add_link"])
})();(function(){dust.register("tl/apps/profile/my_profile/embed/treasury_section_add",m);
function m(q,p){return q.write('<div class="treasury-section-add standard-form"><div class="triangle"></div>').exists(p.get("items"),p,{"else":k,"block":g},null).write('<div class="add-link-upload"><span class="error"></span><div class="upload-form-container"><form name="treasury-add"><span class="error"></span><label for="url" class="ally-text">').section(p.get("i18n"),p,{"block":a},null).write('</label><input class="add-link js-section-level-add media-url media-url-promo" type="text" onpaste="javascript:LI.Events.fire(\'media-url-paste\', this);" autocomplete="off" placeholder="http://" name="url" /></form></div><span class="or-separator">').section(p.get("i18n"),p,{"block":o},null).write('</span><div class="add-upload" role="button"><label for="slideshare-file-input" class="treasury-file-upload">').section(p.get("i18n"),p,{"block":n},null).write('</label></div><a href="').reference(p.get("providers"),p,"h").write('" class="providers" title="').reference(p.get("i18n_media_form_providers_title"),p,"h").write('" data-event-id="media-providers">').section(p.get("i18n"),p,{"block":l},null).write('</a></div><div class="actions"><button class="js-section-level-continue btn-primary" type="button">').section(p.get("i18n"),p,{"block":j},null).write('</button><button class="js-section-level-cancel btn-secondary" type="button">').section(p.get("i18n"),p,{"block":h},null).write('</button></div><div class="progress-indicator"></div></div>')
}function k(q,p){return q.write("<div>").section(p.get("i18n"),p,{"block":i},null).write("</div>")
}function i(q,p){return q.reference(p.get("npe_add_to_summary"),p,"h")
}function g(q,p){return q.write('<label for="newSection-TreasuryUpdateForm">').section(p.get("i18n"),p,{"block":f},null).write('</label><div class="entity-selection"><select type="singleselect" id="newSection-TreasuryUpdateForm" name="sectionList">').section(p.get("items"),p,{"block":b},null).write("</select></div>")
}function f(q,p){return q.helper("eq",p,{"else":e,"block":d},{"key":c,"value":"experience"})
}function e(q,p){return q.reference(p.get("npe_add_to_education"),p,"h")
}function d(q,p){return q.reference(p.get("npe_add_to_position"),p,"h")
}function c(q,p){return q.reference(p.get("section"),p,"h")
}function b(q,p){return q.write('<option value="').reference(p.get("value"),p,"h").write('">').reference(p.get("label"),p,"h").write("</option>")
}function a(q,p){return q.reference(p.get("npe_add_link_to_content"),p,"h")
}function o(q,p){return q.reference(p.get("edit_or"),p,"h")
}function n(q,p){return q.reference(p.get("upload_file"),p,"h")
}function l(q,p){return q.reference(p.get("edit_add_a_link_providers"),p,"h")
}function j(q,p){return q.reference(p.get("edit_btn_continue"),p,"h")
}function h(q,p){return q.reference(p.get("edit_btn_cancel"),p,"h")
}return m
})();
(function(){dust.register("treasury_section_add",dust.cache["tl/apps/profile/my_profile/embed/treasury_section_add"])
})();(function(){dust.register("tl/apps/profile/treasury/slideshare_account_binding_dialog",m);
function m(u,t){return u.section(t.get("i18n"),t,{"block":k},null)
}function k(u,t){return u.write('<h1 class="header">').exists(t.get("publishToSlideShareOptIn"),t,{"else":j,"block":h},null).write('</h1><div class="description">').exists(t.get("publishToSlideShareOptIn"),t,{"else":f,"block":e},null).write('</div><div class="account-note">').exists(t.get("multipleMatchesFound"),t,{"else":d,"block":a},null).write("</div>").exists(t.get("slideShareModalImage"),t,{"block":o},null).write('<div class="cta-container"><div class="cta"><button id="opt-out" class="opt-out dialog-close">').exists(t.get("publishToSlideShareOptIn"),t,{"else":n,"block":l},null).write('</button><button id="opt-in" class="opt-in dialog-submit dialog-submit-suppress">').exists(t.get("publishToSlideShareOptIn"),t,{"else":i,"block":g},null).write('</button></div><div class="note">').reference(t.get("slideshare_tc_note"),t,"h").write("</div></div>")
}function j(u,t){return u.reference(t.get("slideshare_opt_out_header"),t,"h")
}function h(u,t){return u.reference(t.get("slideshare_opt_in_header"),t,"h")
}function f(u,t){return u.reference(t.get("slideshare_opt_out_label"),t,"h",["s"])
}function e(u,t){return u.reference(t.get("slideshare_opt_in_label"),t,"h",["s"])
}function d(u,t){return u.exists(t.get("publishToSlideShareOptIn"),t,{"else":c,"block":b},null)
}function c(u,t){return u.reference(t.get("slideshare_opt_out_account_note"),t,"h",["s"])
}function b(u,t){return u.reference(t.get("slideshare_opt_in_account_note"),t,"h",["s"])
}function a(u,t){return u.exists(t.get("publishToSlideShareOptIn"),t,{"else":s,"block":r},null).write('<div class="matched-emails"><select id="slideshareMatchedEmails">').section(t.get("matched_emails"),t,{"block":q},null).write('</select><span class="arrow" aria-hidden="true">&#xe019;</span></div>').helper("jsControl",t,{"block":p},{"name":"Dropdown"})
}function s(u,t){return u.reference(t.get("slideshare_opt_out_accounts_note"),t,"h",["s"])
}function r(u,t){return u.reference(t.get("slideshare_opt_in_accounts_note"),t,"h",["s"])
}function q(u,t){return u.write('<option value="').reference(t.getPath(true,[]),t,"h").write('">').reference(t.getPath(true,[]),t,"h").write("</option>")
}function p(u,t){return u.write('{triggerSelector: ".dropdown-trigger"}')
}function o(u,t){return u.write('<div class="preview-image"></div>')
}function n(u,t){return u.reference(t.get("slideshare_opt_out_dont_publish"),t,"h")
}function l(u,t){return u.reference(t.get("slideshare_opt_in_dont_publish"),t,"h")
}function i(u,t){return u.reference(t.get("slideshare_opt_out_publish"),t,"h")
}function g(u,t){return u.reference(t.get("slideshare_opt_in_publish"),t,"h")
}return m
})();
(function(){dust.register("slideshare_account_binding_dialog",dust.cache["tl/apps/profile/treasury/slideshare_account_binding_dialog"])
})();(function(){dust.register("tl/apps/profile/treasury/publish_to_slideshare_success_alert",a);
function a(c,b){return c.reference(b.get("publish_to_slideshare_success"),b,"h").write(' <a target="_blank" href="').reference(b.get("slideshowUrl"),b,"h").write('">').reference(b.get("slideshare_view_it_here_label"),b,"h").write("</a>")
}return a
})();
(function(){dust.register("publish_to_slideshare_success_alert",dust.cache["tl/apps/profile/treasury/publish_to_slideshare_success_alert"])
})();LI.define("TreasurySortable");
LI.TreasurySortable=function(c,a,b){LI.TreasurySortable.superclass.constructor.call(this,c,a,b);
this.groupName=a;
this.twoRowClassName="media-wrapper-2row";
this.threeRowClassName="media-wrapper-3row"
};
YAHOO.lang.extend(LI.TreasurySortable,YAHOO.util.DDProxy,{checkDraggable:function(a){if(YDom.hasClass(a,"disabled")||YDom.hasClass(a,"editing")){return true
}},b4StartDrag:function(a,e){var b=YDom.getAncestorByClassName(this.getEl(),"treasury-container"),d="treasury-"+YDom.getAttribute(b,"data-section-id");
if(!this.groups[d]){for(var c in this.groups){this.removeFromGroup(c)
}this.addToGroup(d)
}LI.TreasurySortable.superclass.b4StartDrag.call(this,a,e)
},startDrag:function(){var a=this.getDragEl(),e=this.getEl(),c=this.getDragEl(),d="0",b="#F1F1F1";
if(this.checkDraggable(e)){return
}YDom.addClass(a,YDom.getAttribute(e,"class"));
YDom.addClass(a,LI.Sortable.Constants.RESUME_CLASS);
YDom.addClass(a,LI.Sortable.Constants.SORTABLE_CLASS);
YDom.addClass(a,LI.Sortable.Constants.DRAG_PROXY_CLASS);
YDom.addClass(e,LI.Sortable.Constants.IS_BEING_DRAGGED_CLASS);
a.innerHTML=e.innerHTML.replace(/id="(.*?)"/,'id="$1_0"').replace(/<iframe.*?<\/iframe>/,"");
if(this.config.additionalProxyClass){YDom.addClass(a,this.config.additionalProxyClass)
}YDom.removeClass(a,LI.Sortable.createGroupIdentifier(this.groupName));
YDom.setStyle(c,"padding",d);
YDom.setStyle(c,"background-color",b);
YAHOO.util.DragDropMgr.refreshCache()
},endDrag:function(){var b=this.getEl(),j=this.getDragEl(),d=j.id,g=this.id,c=YDom.getAncestorByClassName(b,"treasury-container"),e=this.twoRowClassName,h=this.threeRowClassName,m=YDom.hasClass(b,e),l=YDom.hasClass(j,e),f=LI.TREASURY_CONF.url.reorder,p="_reorderList",i="_section",n,o;
if(this.checkDraggable(b)){return
}var k=new YAHOO.util.Motion(j,{points:{to:YDom.getXY(b)}},0.2,YAHOO.util.Easing.easeOut);
k.onTween.subscribe(function(){YDom.setStyle(d,"visibility","visible")
});
k.onComplete.subscribe(function(){YDom.removeClass(g,LI.Sortable.Constants.IS_BEING_DRAGGED_CLASS);
if(!b.id){b.id=YDom.generateId()
}for(var q=0,t=Y$("#"+b.id+" iframe"),a=t.length,s;
q<a;
q++){s=null;
try{s=t[q].getAttribute("data-li-src");
if(s){t[q].src=s
}}catch(r){}}if(m!==l){if(l){YDom.replaceClass(b,h,e)
}else{YDom.replaceClass(b,e,h)
}}YDom.get(d).className="";
YDom.setStyle(d,"visibility","hidden");
YDom.get(d).innerHTML="";
YDom.setStyle(b,"width","");
YDom.setStyle(j,"padding","");
YDom.setStyle(j,"background-color","");
try{domNode.style.visibility="hidden";
domNode.style.visibility=""
}catch(r){}});
n=YDom.getAttribute(Y$(".media-cell:not(.media-add-frame)",c),"data-item-id");
o=YDom.getAttribute(c,"data-section-id");
$.ajax(f.replace(p,n).replace(i,o),{dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(a){},error:function(){}});
k.animate()
},onDragOver:function(k,c){var b=this.getEl(),i=YDom.get(c),o=YDom.getAncestorByClassName(i,"media-wrapper"),l=this.getDragEl(),m=YDom.getAncestorByClassName(b,"media-wrapper"),n=YDom.getAncestorByClassName(i,"media-wrapper"),f=this.twoRowClassName,h=this.threeRowClassName,j="194px",g="296px",d=document.compareDocumentPosition?b.compareDocumentPosition(i)===2:(function(){var r=Y$(".media-cell",YDom.getAncestorByClassName(b,"treasury-container")),p,e;
for(var q=r.length-1;
q>=0;
q--){if(!p&&r[q]===b){p=q
}if(!e&&r[q]===i){e=q
}if(p!==undefined&&e!==undefined){if(p>e){return true
}else{return false
}}}}.call(b,i));
function a(e,v,u){var r=u?YDom.getNextSibling(e):YDom.getPreviousSibling(e),p=f,q=h,t=YDom.hasClass(v,q)?q:p,s=t===q?p:q;
if(!YDom.hasClass(r,"media-wrapper")){if(r){r=YDom.getFirstChild(r)
}else{r=YDom.getPreviousSibling(YDom.getAncestorBy(e))
}}if(r){r.insertBefore(v,u?YDom.getFirstChild(r):null);
YDom.replaceClass(v,t,s)
}if(!Y$(".media-add-frame",r).length){if(Y$(".media-cell",r).length!==(s===q?3:2)){if(u){a(r,YDom.getLastChild(r),true)
}else{a(r,YDom.getFirstChild(r),false)
}}}}if(this.checkDraggable(b)){return
}if(YDom.hasClass(i,h)){YDom.setStyle([b,l],"width",j);
YDom.replaceClass(l,f,h)
}else{YDom.setStyle([b,l],"width",g);
YDom.replaceClass(l,h,f)
}if(m!==n){if(d){o.insertBefore(b,i);
a(o,YDom.getLastChild(o),true)
}else{o.insertBefore(b,YDom.getNextSibling(i));
a(o,YDom.getFirstChild(o),false)
}}else{o.insertBefore(b,d?i:YDom.getNextSibling(i))
}YAHOO.util.DragDropMgr.refreshCache()
}});(function(bc,a0){var N="ontouchstart" in document.documentElement?"touchend":"click",J=LI.Events,bd=J.bind,G=J.fire,L=function(bu){try{WebTracking.trackUserAction(bu)
}catch(bv){}},w=".treasury-container",B=".treasury-edit-form-container",s=".edit-my-profile",Y="active-edit treasury",T="editing",p="disabled",at="stealth",Z=".btn-media-edit",a="_treasuryId",bt="_section",o="_ssSlideshowId",O=Z+".active-edit.treasury",aQ="#slideshare-file-input",af=".treasury-section-add",P=".media-wrapper > div",ap=".media-wrapper > div:not(.disabled)",aJ=".media-image-wrapper",X=".media-empty",F=".media-add-promo,.treasury-promo",i=".hidden-view-less,.hidden-view-more",an=".media-add-frame",aT="treasury_edit",bf=".media-url",aY=".media-title",aX=".media-description",ay=".upload-file-btn",bl="upload-failed",y="#ygddfdiv",aU="ok",b="show-media-error",aN="media-cancel",W="fetched",az="processing",aZ="no-summary",ar="saving",aB=".continue-btn",bi=".edit-tools .add-treasury-dropdown",a8=".treasury-promo .treasury-file-upload",ba=".treasury-add-link-upload .treasury-file-upload",a4=".treasury-section-add .treasury-file-upload",M=".treasury-cta",a3=LI.browser,r=a3.ie7||a3.ie8,Q="",K=90,aV=800,R=LI.htmlEncode,D="treasury_add_link",l="treasury_view_v2",aP="profile_thumbnail_view",H="occupation_options",q=a0("body"),A=a0(document),bn=a0("#profile"),E="small",a1="big",aS="none",ae="url",e,C,k,a9,ag,ai,c,bm,av,aO,bb,I,z,be,aR,bk,bo,aM,x,br,h=false,aA=false,aq=false,aw="",a2=[],al="",a7="",g=false,aL={UNKNOWN:0,BOUND:1,EMAIL_MATCHED:2,MULTIPLE_EMAILS_MATCHED:3,AUTO_SPAWNED:4},a6={attributes:{event:""},impression_position:1,impression_version:1},ax="",n="",bs="",aW="",u="",f="treasury_slideshare",V="publishToSlideShare-TreasuryCreateForm",j=false,am=false,ak=false;
function aD(){e=LI.TREASURY_CONF;
ai=e.i18n;
I=e.url;
c=e.tracks;
bm=e.lix;
av=bm.facelift;
C=ai.treasury_error_rendering;
k=ai.treasury_remove_message;
a9=ai.treasury_invalid_url;
ag=a0("#wrapper");
aO=a0("body,html");
z=a0("#background-summary-container");
j=bm.publishToSlideShareLix;
am=bm.slideShareModalImage;
ak=bm.publishToSlideShareOptIn;
br=e.defaultPublishToSlideShare;
a6.attributes.event="checkbox_displayed";
ax=JSON.stringify(a6);
a6.attributes.event="optin_modal_image";
n=JSON.stringify(a6);
a6.attributes.event="optin_modal_no_image";
bs=JSON.stringify(a6);
a6.attributes.event="optout_modal_image";
aW=JSON.stringify(a6);
a6.attributes.event="optout_modal_no_image";
u=JSON.stringify(a6);
A.on(N,".done-edit-profile",function(){a0(B+" .x-close").trigger(N);
if(z.hasClass(aZ)&&z.find(w+" .media-cell[data-item-id!=-1]").length>0){z.removeClass(aZ)
}});
a0(w+" script").remove();
q.on("switch-edit",function(){a0(w+" script").remove()
});
q.on(N,w+"."+bl+" .error-msg a",function(bv){var bu=new LI.Dialog();
bv.preventDefault();
bu.open({content:{title:ai.upload_support_files_title,node:"file-supported-dialog"},className:"dialog-v2",name:"treasury-upload-supports",type:"task-modal",width:500})
});
if(bm.newProfileEdit){bd("treasury-open-item",function(bu){if(!bu.closest(".active-edit").length){G("media-edit-item",bu.find(Z))
}})
}}q.on(N,s+".active-edit .media-add-promo",function(bu){bu.preventDefault()
});
function aj(){a0(Z).removeClass(p);
a0(P).removeClass(p).removeClass(T);
a0(F).removeClass(p);
a0(i).removeClass(p);
a0(y).removeClass(at);
a0(bf).val(Q);
a0(O).removeClass(Y);
a0(an).hide();
a0(X).hide();
bb=null;
a0(w).removeClass(bl);
a0.fn.Profile.fire(a0.fn.Profile.EVENTS.FORM_CLOSED)
}function ah(){a0(Z).addClass(p);
a0(P).addClass(p);
a0(F).addClass(p);
a0(y).addClass(at);
a0.fn.Profile.fire(a0.fn.Profile.EVENTS.FORM_OPENED)
}function m(bw,bz){var by=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,bv,bA,bx,bB,bu;
if(bz.hasClass(az)){return
}bz.addClass(az);
if(bz.hasClass("media-url-promo")){bb=bw;
bx=bz.closest(".treasury-promo").parent();
bu=bx.closest(".background-summary");
bx=bu.length?bu:bx;
bx.find(".media-add-action").trigger(N);
bz.removeClass(az)
}else{if(bb){bz.val(bb)
}bw=a0.trim(bz.val());
bv=bz.closest("li").find(".media-input .error");
bv.html(Q);
if(!bw.length){bz.removeClass(az);
return bv.html(a9)
}if(bw.length>e.maxUrlLength){bz.removeClass(az);
return bv.html(ai.error_url_too_long.replace("{0}",bw.length-e.maxUrlLength))
}bB=bz.closest(".media-wrapper");
bB.addClass(ar);
aK(bw,bz,bB,bv)
}}function aK(bv,bw,bu,bA,bz){var bC,bB,bx=true,by;
if(bz){bC=bz.find(".media-cell").last();
bB=bC.closest(".media-wrapper");
bx=bC.hasClass("media-wrapper-2row");
by=bB.find(".media-cell").index(bC)
}a0.ajax(I.add.replace("_url",encodeURIComponent(bv)),{dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(bF){var bE,bD={add_new:true,add_url:true,i18n:ai,lix:bm},bG;
bu.removeClass(ar);
if(!bF||!bF.content||!bF.content.treasury_form||bF.content.treasury_form.errors){bE=bF&&bF.content&&bF.content.treasury_form&&bF.content.treasury_form.errors||ai.error_fetching_data;
bw.removeClass(az);
if(bm.newProfileEdit){return LI.injectAlert(bE,"error",null,false,true)
}else{return bA.text(bE)
}}bG=bF.content.treasury_form;
bG.i18n=ai;
if((bD.treasurygeneralerror=bG.treasurygeneralerror)||(bD.treasuryurlnotsupport=bG.treasuryurlnotsupport)||(bD.treasuryurlinvalid=bG.treasuryurlinvalid)){if(bm.newProfileEdit){bz.find(an).hide();
return LI.injectAlert(ai.error_general_error,"error",null,false,true)
}else{bD.url=bw.closest(B+" .media-url.media-add-new").val();
bD.providers=I.providers;
dust.render(aT,bD,function(bM,bI){var bH,bL,bK,bJ;
if(bM){bJ=ai.error_rendering_data+" ("+R(bM)+")";
if(bm.newProfileEdit){LI.injectAlert(bJ,"error",null,false,true)
}else{bA.html(bJ)
}}else{bH=bw.closest(B);
bL=bH.parent();
bK=bH.find(".triangle").prop("class");
bH.replaceWith(bI);
bL.find(".triangle").addClass(bK);
a0("#media-url").focus()
}});
bw.removeClass(az);
return
}}bG.providers=I.providers;
bG.fetched=true;
dust.render(aT,bG,function(bM,bJ){var bH,bS,bO,bQ,bN,bR,bI,bT,bL,bK,bP;
if(bM){bP=ai.error_rendering_data+" ("+R(bM)+")";
if(bm.newProfileEdit){LI.injectAlert(bP,"error",null,false,true)
}else{bA.html(bP)
}}else{if(bz){bz.append(a0("<div>").addClass("media-wrapper edit add-new"));
bz.find(".media-wrapper.add-new").append(a0("<div>").addClass("treasury-edit-form-container"));
bH=bz.find(".treasury-edit-form-container");
bz.find(".media-edit.media-add-new").removeClass("processing")
}else{bH=bw.closest(B)
}bS=bH.parent();
bQ=bH.find(".triangle").prop("class");
bH.replaceWith(bJ);
bS.addClass(W);
bO=bS.find(".triangle");
bO.addClass(bQ||aI(bx,by));
if(av){bK={lix_facelift:"B",images:[{url:bG.html.images.value,width:"",height:""}],title:bG.html.customTitle.value};
dust.render(aP,bK,function(bW,bV){var bX=a0(bV),bY=bS.closest(w).find(".media-cell.media-add-frame"),bU=bX.eq(0);
bY.find(".media-data").replaceWith(bU)
})
}else{bS=bS.prev().find(".media-add-frame");
bR=bG.html.customTitle.value;
bN=bG.html.images.value;
if(bR){bS.find(".text-box p").html(R(bR))
}bS.find(aJ).html('<img class="media-image" src="'+R(bN)+'"/>'+'<span class="centering-helper"></span>');
bL=new Image();
bL.onload=function(){bN=bS.find(aJ+" .media-image");
bI=bN.width();
bT=bN.height();
bN.attr("data-width",bI);
bN.attr("data-height",bT)
};
bL.src=bN;
if(bL.complete){}}bS.parent().next().find("input:visible:first").focus()
}});
bw.removeClass(az)
},error:function(){bu.removeClass(ar);
bw.removeClass(az);
if(bm.newProfileEdit){LI.injectAlert(ai.error_fetching_data,"error",null,false,true)
}else{bA.html(ai.error_fetching_data)
}}})
}function aG(bu){var bw=["media-wrapper-2row","media-wrapper-2row","media-wrapper-3row","media-wrapper-3row","media-wrapper-3row"],bv=bw.join(" "),bF=[],bH=[],bE=0,bB=0,bx,bD,bG,bz,by,bA,bC;
bu.find(".media-wrapper").each(function(){var bI=a0(this);
bH.push(bI);
bI.find("> div").each(function(){var bJ=a0(this);
bF.push(bJ)
})
});
bz=bH.length;
bx=false;
if(bF.length===6){bu.find(".hidden-view-more,.hidden-view-less").hide()
}while(bz--){bG=bH[bB++];
by=0;
bA=bx?3:2;
bx=!bx;
if(!bF.length){bG.remove();
break
}while(by<bA&&bF.length){bD=bF.shift();
bD.removeClass(bv);
bD.addClass(bw[bE++]);
bD.appendTo(bG);
bE=(bE>4)?0:bE;
by++
}}bD=bu.find(an);
if(bD.length){bC=bD.parent();
if(bC.children().length===1){bC.addClass("media-add-frame")
}}}bk=function(bx,bA){var bw,bv,bu,bz;
if(!bw){dust.render("tl/apps/profile/v2/embed/dialog",{message:k,submitButton:ai.edit_btn_remove_it,cancelButton:ai.edit_btn_cancel},function(bC,bB){bw=bC||bB
})
}A.on(N,".media-remove-dialog button.dialog-submit-suppress",function(){bz.close();
bu(bv)
});
function by(bB,bC){bv=bB;
bu=bC;
bz=new LI.Dialog();
bz.open({content:{title:ai.edit_remove_dialog_title,html:bw},width:400,webtrack:{key:c.remove_confirmation},className:"media-remove-dialog dialog-v2",name:"media-remove",type:"task-modal"})
}bk=by;
by(bx,bA)
};
A.on("paste propertychange",bf,function(){var bu=a0(this);
setTimeout(function(){m(bu.val(),bu)
},250)
}).on("keydown",bf,function(bv){var bu=a0(this);
if(bv.keyCode===13&&!bu.hasClass(az)){bv.preventDefault();
m(bu.val(),bu)
}}).on(N,aB,function(){var bu=a0(bf);
m(bu.val(),bu)
}).on("keydown",".js-section-level-add",function(bu){if(bu.keyCode===13){var bv=a0(this);
bu.preventDefault();
au(bv,S())
}}).on(N,".js-section-level-continue",function(bu){var bv=a0(af+" .js-section-level-add");
au(bv,S())
}).on(N,".js-section-level-cancel",function(bu){bu.preventDefault();
a0(af).fadeOut("fast",function(){v()
})
}).on("paste propertychange",aY,function(){var bu=a0(this);
setTimeout(function(){a0(O).parent().find("p").html(R(bu.val()))
},250)
}).on("keydown",aY,function(bv){var bu=a0(this);
if(bv.keyCode===13){bv.preventDefault();
return bu.closest("form").find(".btn-primary").trigger(N)
}setTimeout(function(){var bx=bu,bw=a0.trim(bx.val()),bz=bx.closest("li").find("span.error"),by=bx.closest("form").find("button.btn-primary");
if(bw.length>e.maxTitleLength){if(!be){be=true;
by.prop("disabled",true)
}return bz.html(ai.error_title_too_long.replace("{0}",bw.length-e.maxTitleLength))
}else{if(be){bz.html(Q);
be=false
}}a0(O).parent().find("p").html(R(bu.val()));
if(!be&&!aR){by.prop("disabled",false)
}},0)
}).on("keydown",aX,function(){var bu=a0(this);
setTimeout(function(){var bv=bu,by=a0.trim(bv.val()),bx=bv.closest("li").find("span.error"),bw=bv.closest("form").find("button.btn-primary");
if(by.length>e.maxDescriptionLength){if(!aR){aR=true;
bw.prop("disabled",true)
}return bx.html(ai.error_description_too_long.replace("{0}",by.length-e.maxDescriptionLength))
}else{if(aR){bx.html(Q);
aR=false
}}if(!be&&!aR){bw.prop("disabled",false)
}},0)
}).on("submit",".treasury-form-container form",function(bv){var bu=a0(this).find(bf);
bv.preventDefault();
m(bu.val(),bu)
}).on("click",".treasury-form-container .providers, "+w+" .providers, .treasury-form-container-upload .providers, "+af+" .providers",function(bu){bu.preventDefault();
LI.popup(a0(this).attr("href"),{})
});
bd("media-url-paste",function(bu){if(r){setTimeout(function(){m(bu.value,a0(bu))
},250)
}});
function au(bx,bu){var bw=a0.trim(bx.val()),bv=a0(af).find(".error");
bv.html(Q);
if(!bw.length){return bv.html(a9)
}if(bw.length>e.maxUrlLength){return bv.html(ai.error_url_too_long.replace("{0}",bw.length-e.maxUrlLength))
}v();
if(bm.newCta){t().hide()
}G("media-add-promo",bx,bu,{});
aK(bx.val(),a0(""),a0(""),bv,bu)
}function v(){a0(af).addClass("hidden")
}function S(){var bu=a0("#newSection-TreasuryUpdateForm").val()||"",bv=bu.toLowerCase()==="summary";
return bn.find('.treasury-container[data-section-id="'+(bv?"":bu)+'"]')
}function d(bu){bu.addClass("editing");
bu.closest(".entity").addClass("active-edit")
}function t(bu){bu=bu||S();
return bu.closest(".entity-container,.background-summary").find(".treasury-cta")
}function bh(bw){var bv,bu;
if(!bm.newCta){return
}bv=a5(bw);
bu=bw.closest(".background-summary").find(".edit-tools .edit-treasury");
if(bv>0){t(bw).hide();
bu.show()
}else{t(bw).show();
bu.hide()
}}function a5(bu){return bu.find(".media-cell").not(".media-add-frame").length
}bd("media-add-promo",function(bx,bv,bu){var bA=bv||bx.closest(".treasury-add-link,.treasury-add-link-upload").siblings(w),bz=bA.find(".media-add-frame"),bw=bu&&bu.uploadFailed,by=bu&&bu.errorType;
ae=bx?"url":"file";
if(bw||!a0(s).closest(".active-edit").length){bA.addClass("adding");
if(bw){bA.addClass(bl)
}else{bA.removeClass(bl)
}bA.siblings(".hidden-view-more").trigger(N);
bA.find(an).show();
if(bm.newProfileEdit){bz.find(".media-edit.media-add-new").addClass("processing");
d(bz);
aO.animate({scrollTop:bA.find(".media-cell.media-add-frame").offset().top-K},aV)
}else{G("media-edit-item",bz.find(Z),by)
}bA.removeClass("adding")
}});
bd("media-close-promo",function(bv){var bu=bv.closest(".treasury-promo");
bu.fadeOut(function(){bu.remove()
})
});
bd("media-close-promo-bar",function(bv){var bu=bv.parent();
bu.fadeOut(function(){bu.remove()
})
});
bd("media-add",function(bv){var bu;
a0("#add-media-callout").fadeOut();
if(!ag.hasClass("active-edit")&&!bv.hasClass(az)){bu=bv.data("selector");
bv.addClass(az);
G("media-add-promo",bv,a0(bu),{uploadFailed:bv.hasClass(bl)});
bv.removeClass(az)
}});
bd("media-section-add",function(bE){if(bE.hasClass(az)){return
}var bx=a0(".media-cell").data("item-id"),bD="",bG=bE.data("section-hook"),bv=a0(af),bz,by,bF=bm.newProfileEdit?I[bG]:I.get_update.replace(a,bx).replace(bt,bD);
bE.addClass(az);
function bC(){bE.removeClass(az);
G(b,ai.error_fetching_data)
}function bA(bH){if(bm.newProfileEdit){return !(bH.status===aU&&bH.content)
}else{return !(bH.status===aU&&bH.content&&bH.content.treasury_form&&!bH.content.treasury_form.errors)
}}function bu(bL,bJ){var bH=bE.closest(".sum-buttons"),bK=bE.closest(".treasury-cta"),bQ,bO,bM,bI,bN,bP;
bv.remove();
bO=a0(bJ);
if(bH.length){bM=bH.parent()
}else{if(bK.length){bM=bK.parent()
}}if(bE.hasClass("treasury-video")||bE.hasClass("treasury-link")){bO.find(".add-upload,.or-separator").hide()
}bO.addClass("with-triangle");
bI=a0(".triangle",bO);
bN=bE.position().left+bE.outerWidth()/2;
bN-=10;
bI.width();
bO.find(".triangle").css("left",bN);
bM.after(bO);
bQ=bE.closest(".entity-container");
bP=bQ.find(".treasury-container").data("section-id");
if(bP){bO.find("#newSection-TreasuryUpdateForm").val(bP)
}bE.removeClass(az)
}function bw(bI,bH){bv.remove();
bE.closest(".header").after(bH);
bE.removeClass(az)
}function bB(bH){bH=bH||{};
bH.i18n=ai;
bH.providers=I.providers;
bH.section=bE.closest("#background-experience").length?"experience":"education";
dust.render("treasury_section_add",bH,(bE.closest(".sum-buttons").length||bE.closest(".treasury-cta").length)?bu:bw)
}if(bF){bz=bE.closest(".section-container");
by=bz.data(H);
if(by){bB(by)
}else{a0.ajax(bF,{type:"GET",dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(bH){var bI={};
if(!bA(bH)){if(bm.newProfileEdit){bI.items=bH.content.treasuryOption?bH.content.treasuryOption.options:false
}else{bI.items=bH.content.treasury_form.html.newSection.options
}bB(bI);
bz.data(H,bI)
}else{bC()
}},error:bC})
}}else{bB()
}});
function aF(bw){var bu,bv;
bu=bw.lastIndexOf("\\");
if(bu>=0){bw=bw.substring(bu+1)
}bv=bw.lastIndexOf(".");
if(bv>0){bw=bw.substr(0,bv)
}return bw
}q.on("upload-complete",function(bD,by){var bz=bo.find(an),bG=bo.data("section-id"),bA=bz.find(aJ),bw=a0(aQ).attr("data-li-uploaded-filename"),bB,bC,bu,bv,bF,bE={};
if(by){bC=by.title||"";
bu=by.image||"";
if(!bC&&bw){bC=aF(bw)
}bo.addClass("adding");
bo.find(".progress").remove();
if(av){bB={lix_facelift:"B",images:[{url:bu,title:R(bC)}],title:R(bC)};
dust.render(aP,bB,function(bI,bH){bo.find(".media-cell.media-add-frame .media-data").replaceWith(a0(bH).eq(0))
})
}else{bA.children(".media-image").remove();
bA.prepend(a0("<img>").addClass("media-image").attr("src",bu));
bz.find(".text-box").find("p").html(R(bC))
}bv=I.action.match("[?&]csrfToken=([^&]+)");
var bx={add_url:false,i18n:ai,action:I.action,html:{customTitle:{id:"customTitle-TreasuryCreateForm",value:bC,name:"customTitle"},customDescription:{id:"customDescription-TreasuryCreateForm",value:"",name:"customDescription"}},csrfToken:{id:"csrfToken-TreasuryCreateForm",value:bv?bv[1]:"",name:"csrfToken"},memberId:e.memberId,sectionId:bG,code:{id:"code-TreasuryCreateForm",value:by.hash,name:"code"},isImage:{id:"isImage-TreasuryCreateForm",value:""+by.isImage,name:"isImage"},slideshow:{id:"slideshow-TreasuryCreateForm",value:by.slideshowstr,name:"slideshowstr"}};
bF=bx.html;
if(j){bx.publishToSlideShareLix=j;
if(!by.isImage){if(h){bE=ax;
bF.publishToSlideShare={id:V,value:true,name:"publishToSlideShare",checkedByDefault:br}
}else{if(ak){if(am){bE=n
}else{bE=bs
}}else{if(am){bE=aW
}else{bE=u
}}bF.publishToSlideShareHidden={id:V,value:"true",name:"publishToSlideShare"};
bF.ssMoveToEmail={id:"ssMoveToEmail-TreasuryCreateForm",value:"",name:"moveSlideshowToEmail"};
bF.newSlideShareAccountCreated={id:"newSlideShareAccountCreated-TreasuryCreateForm",value:aA,name:"newSlideShareAccountCreated"}
}WebTracking.trackUserImpression(f,bE,true);
bF.ssSlideshowId={id:"slideshowId-TreasuryCreateForm",value:al,name:"ssSlideshowId"},bF.ssSlideshowUrl={id:"slideshowUrl-TreasuryCreateForm",value:a7,name:"ssSlideshowUrl"}
}}if(a0(".upload-again").length){bo.find(".media-wrapper.add-new.fetched").show()
}dust.render(aT,bx,function(bI,bH){bo.find(".media-wrapper.fetched").html(bH);
aE(bI,bH,bz.find(Z),true)
});
bo.removeClass("adding")
}}).on("upload-file-complete",function(bu,bw){if(j){al=bw.slideshow_id;
a7=bw.slideshow_url;
aA=false;
switch(bw.account_status){case aL.BOUND:h=true;
break;
case aL.EMAIL_MATCHED:aq=true;
aw=bw.bound_email;
break;
case aL.MULTIPLE_EMAILS_MATCHED:aq=true;
aw=bw.bound_email;
g=true;
a2=bw.matched_emails;
var bv=_.indexOf(a2,aw);
if(bv>-1){a2.splice(bv,1);
a2.unshift(aw)
}break;
case aL.AUTO_SPAWNED:aA=true;
aq=true;
aw=bw.bound_email;
break
}}}).on("upload-active",function(bu,bv){setTimeout(function(){var by=bo.find(an),bx=by.find(Z),bw=bx.closest(".media-cell");
bo.siblings(".hidden-view-more").trigger(N);
if(av){by.find(".media-data").html(a0("<div>").addClass("media-placeholder"));
by.find(".media-edit.media-add-new").addClass("processing")
}else{by.find(".media-image").remove();
by.find(".text-box").find("p").html("");
by.find(".outer").append(a0("<span>").addClass("progress"))
}by.show();
ah();
bx.removeClass(p);
bw.removeClass(p).addClass(T);
a0(i).addClass(p);
if(bm.newProfileEdit){v();
d(by)
}if(bm.newCta){t().hide()
}aO.animate({scrollTop:bw.offset().top-K},aV)
},0)
}).on("upload-progress",function(bu,bv){}).on("upload-error",function(bu,bv){setTimeout(function(){if(av){bo.find(an).find(".media-edit.media-add-new").removeClass("processing")
}bo.find(".media-wrapper.fetched").remove();
bo.find(".progress").remove();
ae="file";
G("media-add-promo","",bo,{uploadFailed:true,errorType:bv.type})
},50)
});
function aE(bC,bv,bu,bB){var bH=bu.closest(".media-cell"),bE=bH.closest(".media-wrapper"),bF=bE.closest(w).data("section-id"),bz=bu.hasClass("media-add-new"),bx=bz?" add-new":"",bG=bB?" fetched":"",bw=bH.hasClass("media-wrapper-2row"),by=bE.find(".media-cell").index(bH),bD,bA;
bu.removeClass(az);
if(bC){G(b,bC)
}else{bv='<div class="media-wrapper edit'+bx+bG+'">'+bv+"</div>";
bD=bE.after(a0(bv)).next();
bD.find("input:visible").first().focus().select();
bu.addClass(Y);
bA=bD.find(".triangle");
bA.addClass(aI(bw,by));
ah();
bu.removeClass(p);
bH.removeClass(p).addClass(T);
a0(i).addClass(p);
aO.animate({scrollTop:bH.offset().top-K},aV,function(){if(bb){bb=null;
bD.find("input:visible").first().trigger("propertychange")
}})
}}bd("media-edit-item",function(bw,by){var bz=bw.closest(w),bv=bz.data("section-id"),bx=bw.closest(".media-cell");
function bu(){bw.removeClass(az);
G(b,ai.error_fetching_data)
}if(bw.hasClass(az)){return
}bw.addClass(az);
if(bm.newProfileEdit){d(bx)
}if(bw.hasClass("media-add-new")){if(av){U(bz)
}else{bx.find(aJ).html(Q).append(a0("<span>").addClass("centering-helper"));
bx.find(".text-box p").html(Q)
}dust.render(aT,{add_new:true,i18n:ai,add_url:ae==="url",url:bb||"http://",lix:bm,providers:I.providers,errorType:by},function(bB,bA){aE(bB,bA,bw)
});
a0(".media-add-frame .media-image").removeAttr("data-width").removeAttr("data-height")
}else{a0.ajax(I.get_update.replace(a,bw.data("id")).replace(bt,bv),{type:"GET",dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(bA){var bB;
if(bA.status===aU&&bA.content&&bA.content.treasury_form&&!bA.content.treasury_form.errors){bB=bA.content.treasury_form;
bB.i18n=ai;
bB.providers=I.providers;
bB.enableMovingTreasuryObject=e.enableMovingTreasuryObject;
dust.render(aT,bB,function(bD,bC){aE(bD,bC,bw)
})
}else{bu()
}},error:bu})
}});
function U(bv){var bu=bv.find(".media-cell.media-add-frame");
if(!bu.find(".media-placeholder").length){dust.render(aP,{lix_facelift:"B"},function(bx,bw){if(!bx){bu.find(".media-data").replaceWith(a0(bw).eq(0))
}})
}}function ao(bx,bv){var bw={"i18n":ai,"lix_treasury_upload":"B"},bu;
if(bv===E){bw.showSmallPromo=true
}else{if(bv===a1){bw.showBigPromo=true;
bw.lix_treasury_callout="A";
bw.lix_treasury_viewer="control";
bw.img=img
}}dust.render(D,bw,function(bz,by){if(bz){showError(C)
}else{bx.before(by)
}});
if(bv===a1){bu=a0(".treasury-add-link-upload");
if(bu.length){dust.render(D,bw,function(bz,by){if(bz){showError(C)
}else{bu.replaceWith(by)
}})
}}}function bq(bx){var bw=null,bu,bv;
if(!bx){return aS
}if(a5(bx)){return aS
}bu=["summary","experience","education"];
a0.each(bu,function(bz,by){var bA=bx.closest("#background-"+by);
if(bA.length){bw=bA;
return false
}});
if(!bw){return aS
}bv=bw.find(w).first();
if(bx.length&&bv.length&&bx[0]===bv[0]){return E
}return aS
}bd(aN,function(by,bw,bz){var bv=by.closest(B),bx=bv.parent(),bu=a0(aY);
if(!bw&&bu.length){a0(O).parent().find("p").html(R(bu.data("original-text")))
}bv=bx.hasClass("media-wrapper")?bx:bv;
if(a0(".upload-again").length){ad(bv)
}if(bm.newProfileEdit){bv.closest(".entity").removeClass("active-edit")
}bv.fadeOut("fast",function(){if(av){U(by.closest(w))
}if(bm.newCta){bh(bv.closest(w))
}bv.remove();
aj();
if(bz){bz()
}});
if(!bw&&(h||aq)){WebTracking.trackUserAction(f,null,true,"cancelled")
}L(c.media_edit_cancel)
});
function aC(bx){var bv=bx.closest(B),bz=bv.closest(w),bA=bv.parent(),bw=bx.data("id"),bC=bx.closest(w).data("section-id"),by,bu=I.remove.replace(a,bw).replace(bt,bC);
bv=bA.hasClass("media-wrapper")?bA:bv;
if(j){var bB=bx.data("ssslideshowid");
bu=bu.replace(o,bB)
}a0.ajax(bu,{dataType:"json",headers:{"X-IsAJAXForm":"1"},success:function(){G("media-item-removed",{id:bw})
},error:function(){G(b,ai.error_removing_data)
}});
by=a0(ap);
bv.fadeOut("fast",function(){var bD,bE;
bv.remove();
by.remove();
aG(bz);
bE=a5(bz);
if(bE===5){bz.removeClass("restrict");
bz.siblings(".hidden-view-more, .hidden-view-less").remove()
}aj();
bD=bm.newProfileEdit?aS:bq(bz);
if(bD!==aS){ao(bz,bD)
}if(bm.newProfileEdit){bz.closest(".entity").removeClass("active-edit")
}if(bm.newCta){bh(bz)
}})
}bd("media-remove",function(bu){bk(bu,aC)
});
function ac(bu){bu.find(".treasury-promo, .treasury-add-link, .treasury-add-link-upload").remove()
}function bg(bu){return bu.closest(".background-experience, .background-education, .background-summary")
}function ab(bw){var bx=bw.closest("form"),bH=bx.parent().parent(),bE=bH.closest(w),bz=bx.attr("action"),bG,bI,bA,by,bD,bJ,bF,bC,bv,bB,bu;
bG=bx.find(".media-title");
bI=bx.find(".media-description");
by=bx.find("li:first span.error");
bA=bG.closest("li").find("span.error");
by.html(Q);
bB=bx.find(".publish-to-slideshare");
bv="do_not_publish";
if((h&&bB.is(":checked"))||(aq&&bB.val()==="true")){bv="publish"
}WebTracking.trackUserAction(f,null,true,bv);
if(!a0.trim(bG.val())){bG.focus();
return bA.html(ai.edit_error_please_enter_title)
}bx.find("#memberId").val(e.memberId);
bx.find("#sectionId").val(bE.data("section-id"));
bH.addClass(ar);
a0.ajax(bz,{type:"POST",dataType:"json",headers:{"X-IsAJAXForm":"1"},data:bx.serialize(),success:function(b2){var bQ,b1,b0,bV,bS,bX,bU,bN,bO,bZ=bH.hasClass("add-new"),bL=bm.reorder,bT,bY,bK,bM,bR,bW,bP;
bH.removeClass(ar);
if(!b2||b2.status!==aU||!b2.content||b2.content.errors){return by.html(ai.error_editing_data)
}bV=bZ?b2.content.id:bw.data("id");
bX=bZ?b2.content.images[0].width:bw.data("width");
bU=bZ?b2.content.images[0].height:bw.data("height");
if(bZ){bW=b2.content;
bW.isAddNew=true
}else{bW={id:bV,title:bG.val(),description:bI.val()}
}if(bZ){bQ=bH.prev().find(".media-add-frame.cell");
b1=bQ.parent();
if(bm.newProfileEdit){b1.removeClass("media-empty media-add-frame stealth").css("display","")
}else{b1.removeClass("media-empty media-add-frame")
}bS=b1.closest(w);
bD=b2.content.slideshow_url;
b0={addNew:true,whichRow:bQ.hasClass("media-wrapper-2row")?"2row":"3row",id:bV,images:[{url:bQ.find(av?".thumbnail":".media-image").attr("src"),width:bX,height:bU}],formData:{group:"treasury-"+bS.attr("data-section-id")},title:bG.val(),i18n_Edit:"Edit",lix_treasury_reorder:bL?"B":"control",lix_facelift:av?"B":"control",slideShareUrl:bD,i18n_view_on_slideshare:ai.view_on_slideshare};
dust.render(l,b0,function(b4,b3){if(b4){showError(C)
}else{bQ.before(b3);
if(bL){LI.Controls.parseFragment(bS);
setTimeout(function(){bS.find("script").remove()
},0)
}}});
bN=a0('<div class="media-wrapper media-empty"></div>');
bQ.appendTo(bN);
b1.after(bN);
bQ.find(".media-image").removeAttr("data-width").removeAttr("data-height");
if(av){U(bS)
}if(bm.newCta){bh(bE)
}ac(bg(bE));
bP=a0("#summary-item .treasury-promo, #background-experience .treasury-promo, #background-education .treasury-promo");
if(bP.length){dust.render(D,{"i18n":ai,"showSmallPromo":true,"lix_treasury_upload":(bm.enableUpload?"B":"control")},function(b4,b3){if(b4){showError(C)
}else{bP.replaceWith(b3)
}})
}}else{if(e.enableMovingTreasuryObject){bO=a0(".section-select option:selected");
if(!bO.hasClass("original")){bT=a0(".btn-media-edit.active-edit").closest(".media-cell");
bY=bT.closest(w);
bK=a0(w+'[data-section-id="'+bO.val()+'"]');
if(!bK.length){bK=a0(w+'[data-section-id=""]')
}bM=a0('<div class="media-wrapper"></div>');
bQ=bK.find(".media-cell.media-add-frame.cell");
bR=bQ.parent();
bT.appendTo(bM);
bR.before(bM);
setTimeout(function(){aG(bY);
aG(bK);
var b3=bT.siblings(":visible").last();
if(b3.length){b3.after(bT)
}if(bm.newCta){bh(bY);
bh(bK)
}ac(bg(bK))
},500)
}}}G("media-item-changed",bW);
G(aN,bw.next(),true,function(){if(bZ){aG(bS)
}});
if(j){if(bD){bu={publish_to_slideshare_success:ai.publish_to_slideshare_success,slideshare_view_it_here_label:ai.slideshare_view_it_here_label,slideshowUrl:bD};
dust.render("tl/apps/profile/treasury/publish_to_slideshare_success_alert",bu,function(b4,b3){bC=b4||b3
});
LI.injectAlert(bC,"success",null,true,true)
}aq=false;
h=false
}},error:function(){bH.removeClass(ar);
by.html(ai.error_editing_data)
}})
}function aa(bu){return function(){ab(bu);
bc.oUISettings.saveSettings("defaultPublishToSlideShare",br)
}
}function bp(bv){bv.parents("form").find("#"+V).val("true");
if(g){var bu=a0("#slideshareMatchedEmails option:selected").val();
bv.parents("form").find("#ssMoveToEmail-TreasuryCreateForm").val(bu)
}br=true
}x=function(bv,bz,bB){var bu="",by=LI.TREASURY_CONF.i18n,bx={slideShareModalImage:am,publishToSlideShareOptIn:ak,multipleMatchesFound:g,i18n:by},bA,bw;
if(g){bx.matched_emails=a2
}else{bx.bound_email=aw
}bx.i18n=by;
dust.render("tl/apps/profile/treasury/slideshare_account_binding_dialog",bx,function(bD,bC){bu=bD||bC
});
bw=function(bC,bD,bE){bA=new LI.Dialog();
br=false;
bC.parents("form").find("#"+V).val("false");
bA.open({content:{title:by.reach_more_professionals,html:bu},width:500,className:"slideshare-account-binding-dialog",name:"slideshare-account-binding-name",type:"task-modal"})
};
bw(bv,bz,bB);
x=bw;
bA.closeEvent.subscribe(bB(bv),null,this);
A.on(N,".slideshare-account-binding-dialog button.dialog-submit",function(){bz(bv);
bA.close()
})
};
bd("media-save",function(bu){if(j&&aq){x(bu,bp,aa)
}else{ab(bu)
}});
function aH(bw,bv){var bu=a0("#treasury-slideshare-upload-form");
bo=bw.closest(".edit-default, .editable-item").find(w);
if(!aM){aM=new LI.UploadStateManager()
}bv.append(bu)
}function ad(bu){var bv=a0("#treasury-slideshare-upload-form");
if(bv.closest(bu).length){a0("#background").append(bv)
}}function aI(bv,bw){var bu;
if(bv){bu=bw?"two-right":"two-left"
}else{if(bw===2){bu="three-right"
}else{if(bw===1){bu="three-center"
}else{bu="three-left"
}}}return bu
}q.on("mouseenter",bi,function(bv){var bw=a0(bv.currentTarget),bu=bw.find(".treasury-file-upload");
aH(bw,bu)
}).on("mouseleave",bi,function(bu){var bv=bu.currentTarget;
ad(bv)
}).on("mouseenter",ay,function(bu){var bv=a0(bu.currentTarget),bw=bv.closest(B).find(".upload-again");
aH(bv,bw)
}).on("mouseleave",ay,function(bu){var bw=a0(bu.currentTarget),bv=bw.closest(B).find(".upload-again");
ad(bv)
}).on("mouseenter",a8,function(bu){var bv=a0(bu.currentTarget);
aH(bv,bv.closest(".treasury-form-container-upload"))
}).on("mouseleave",a8,function(){ad(".treasury-promo")
}).on("mouseenter",ba,function(bu){var bv=a0(bu.currentTarget);
aH(bv,bv.closest(".treasury-add-link-subsection"))
}).on("mouseleave",ba,function(){ad(".treasury-add-link-upload")
}).on("mouseenter",a4,function(bu){aH(S(),a0(bu.currentTarget).closest(".add-link-upload"))
}).on("mouseleave",a4,function(bu){ad(".treasury-section-add")
});
if(r){q.on("click",bi,function(bu){a0(bu.currentTarget).toggleClass("ie-open")
}).on("blur",bi,function(bu){setTimeout(function(){a0(bu.currentTarget).removeClass("ie-open")
},500)
})
}A.on(N,"."+bl+" .upload-file-btn",function(bu){bu.preventDefault();
var bw=a0(this);
var bv=bw.closest(".treasury-edit").find(aQ);
bv.attr("data-li-uploaded-filename","");
bv.trigger(N);
bw.closest(w).removeClass(bl);
bw.closest(".media-wrapper").hide()
});
if(!LI.TREASURY_CONF.lix.newProfileEdit){q.on(N,"label.treasury-file-upload, .treasury-file-upload-btn",function(bu){bu.preventDefault();
if(!a0(s).closest(".active-edit").length){a0(aQ).trigger(N)
}})
}function bj(){var bu=100,bv;
return function(bw){if(bw.type==="focusout"){bv=setTimeout(function(){a0(bw.target).closest(".styled-dropdown").removeClass("open")
},bu)
}else{clearTimeout(bv)
}}
}q.on("focusin focusout",".label, .toggle-setting-menu",bj());
bd("media-open-slideshare",function(bu,bv){bc.open(bu.attr("href"))
});
a0.fn.ready(aD)
}(this,jQuery));LI.define("UploadStateManager");
LI.UploadStateManager=function(){var b=LI.Controls.getControl("treasury-slideshare-upload-form","SlideshareUploader2"),d={Inactive:"inactive",UploadActive:"upload_active",UploadError:"upload_error",UploadCancel:"upload_cancel",UploadProgressStart:"upload_progress_start",UploadProgressStatus:"upload_progress_status",UploadProgressEnd:"upload_progress_end",UploadFileComplete:"upload_file_complete",UploadImageComplete:"upload_image_complete",UploadQueueStart:"upload_queue_start",UploadQueueStatus:"upload_queue_status",UploadQueueEnd:"upload_queue_end",UploadConvertStart:"upload_convert_start",UploadConvertStatus:"upload_convert_status",UploadConvertEnd:"upload_convert_end",UploadPreview:"upload_preview",UploadComplete:"upload_complete"},a=$("body"),e=false;
function c(i){var g=[].concat(arguments[1]),k=g.shift(),f=g.shift(),j=g[0]||{},h;
switch(k){case d.UploadProgressStart:break;
case d.UploadActive:e=false;
a.trigger("upload-active",j);
break;
case d.UploadError:a.trigger("upload-error",j);
break;
case d.UploadPreview:break;
case d.UploadProgressStatus:a.trigger("upload-progress",j);
break;
case d.UploadProgressEnd:break;
case d.UploadQueueStart:break;
case d.UploadQueueEnd:break;
case d.UploadConvertStart:break;
case d.UploadConvertStatus:break;
case d.UploadConvertEnd:break;
case d.UploadFileComplete:a.trigger("upload-file-complete",j);
break;
case d.UploadImageComplete:e=true;
break;
case d.UploadProgressEnd:break;
case d.UploadComplete:j.isImage=e;
if(e){h={ThumbnailURL:j.image,ThumbnailSize:j.response.available_sizes.medium,URL:j.image,sizes:j.response.available_sizes};
j.slideshowstr=JSON.stringify(h)
}a.trigger("upload-complete",j);
break
}}b.attachStateMonitor(c)
};LI.define("SlideshareUploader2");
LI.SlideshareUploader2=function(W,I){if(!W||W.nodeType!==1){return
}I=I||{};
this.getElement=function G(){return W
};
this.attachStateMonitor=function(ad){aa.changed.subscribe(ad);
return 1
};
var Z={usePostMessage:true,documentDomain:"no_set",slideshareDomain:"auto",transportName:"slideShareIframeTransport",paths:{},fileInputId:"slideshare-file-input",enableUnload:true,enableImageUpload:true,checkSize:true,maxFileSize:104857600,enableTranscriptAsDescription:true,enableHealthCheck:false,trackingPrefix:"ssu-",promoStatus:0},p={PRESENTATION:"presentation",DOCUMENT:"document",IMAGE:"image",UNKNOWN:"unknown"},t={"jpeg":p.IMAGE,"jpg":p.IMAGE,"gif":p.IMAGE,"png":p.IMAGE,"pdf":p.DOCUMENT,"doc":p.DOCUMENT,"docx":p.DOCUMENT,"rtf":p.DOCUMENT,"odt":p.DOCUMENT,"ppt":p.PRESENTATION,"pps":p.PRESENTATION,"pptx":p.PRESENTATION,"ppsx":p.PRESENTATION,"pot":p.PRESENTATION,"potx":p.PRESENTATION,"odp":p.PRESENTATION},B={QUEUED:0,CONVERTING:1,DONE:2,FAILED:3},D={STARTING:"starting",UPLOADING:"uploading",DONE:"done",ERROR:"error"},u={UPLOAD:"upload",CONVERT:"convert",CONVERT2:"convert2",IFRAME:"iframe",TYPE:"type",SIZE:"size",PROGRESS:"progress"},c={"upload_active":"act","upload_error":"err","upload_cancel":"cncl","upload_progress_start":"ustart","upload_progress_end":"uend","upload_convert_start":"cstart","upload_convert_end":"cend","upload_icon_click":"clck","upload_file_upload":"sbmt","upload_preview":"prvw","upload_file_complete":"fcmpt","upload_image_complete":"icmpt"},E={SUCCEEDED:"succeed",CANCELLED:"cancelled",FAILED:"failed",UPLOAD:"upload",QUEUE:"queue",CONVERT:"convert"},d={Inactive:"inactive",UploadActive:"upload_active",UploadError:"upload_error",UploadCancel:"upload_cancel",UploadProgressStart:"upload_progress_start",UploadProgressStatus:"upload_progress_status",UploadProgressEnd:"upload_progress_end",UploadFileComplete:"upload_file_complete",UploadImageComplete:"upload_image_complete",UploadQueueStart:"upload_queue_start",UploadQueueStatus:"upload_queue_status",UploadQueueEnd:"upload_queue_end",UploadConvertStart:"upload_convert_start",UploadConvertStatus:"upload_convert_status",UploadConvertEnd:"upload_convert_end",UploadPreview:"upload_preview",UploadComplete:"upload_complete"},T=false,aa={},P=null,Y=null,C=YAHOO.lang,l=LI.i18n.get("slideshare-uploader-percentage"),ab=LI.i18n.get("slideshare-uploader-beforeunload"),ac,q,j,O,h,v,a;
function k(ad){C.augmentObject(this,ad,true);
this.progressId=this.progressPrefix+(+new Date())+Math.random();
this.timer=new o()
}function F(ad){function af(ag){if(ag&&ag.status!=="fail"){aa.state(d.UploadFileComplete,ag)
}else{ae(ag)
}}function ae(ag){aa.state(d.UploadError,{type:u.UPLOAD,json:ag})
}O.update({fileId:ad.file_key});
if(O.type===p.IMAGE){a={response:ad,image:O.getImageUploadUrl(),extension:O.ext,type:y(O.ext),id:O.fileId,url:O.getImageUploadUrl()};
aa.state(d.UploadImageComplete,a);
aa.state(d.UploadComplete,a)
}else{b(O.getConvertUrl(),af,ae)
}}k.prototype={convert:"/nhome/slideshare/convert-upload",status:"/nhome/slideshare/get-convert-status",slideshow:"/nhome/slideshare/get-slideshow",imageStore:"http://image-store.slidesharecdn.com/",progressPrefix:"_",uploadCallback:F,update:function(ad){C.augmentObject(this,ad,true);
return this
},updateTimer:function(){var ad=this.timer;
if(ad){return ad.update.apply(ad,arguments)
}return this
},getProgressUrl:function(){return Z.slideshareDomain+"/progress?X-Progress-ID="+this.progressId+"&jsonp_callback={callback}"
},getHealthCheckUrl:function(){if(Z.usePostMessage){return Z.slideshareDomain+"/health_check?X-Progress-ID="+this.progressId+"&jsonp_callback=void&window_post=true&iframe_jsonp=true&post_window=parent"
}else{return Z.slideshareDomain+"/health_check?X-Progress-ID="+this.progressId+"&jsonp_callback=void&set_document_domain=true&iframe_jsonp=true"
}},getUploadUrl:function(){var ad="SlideshareUploader"+this.progressPrefix+(+new Date()),ae;
ad=ad.replace(/\W/g,"");
LI[ad]=(function(af,ag){return function(){delete LI[ad];
af.apply(ag,arguments)
}
}(this.uploadCallback,this));
ae=Z.slideshareDomain+"/upload?X-Progress-ID="+this.progressId+"&iframe_jsonp=true";
if(Z.usePostMessage){ae+="&window_post=true&post_window=parent&jsonp_callback="+ad
}else{ae+="&set_document_domain=true&jsonp_callback=parent.LI."+ad
}return ae
},getConvertUrl:function(){return this.convert+"?shareOnSS=false&fileKey="+this.fileId
},getConvertStatusUrl:function(){return this.status+"?slideshowId="+this.slideshowId
},getPreviewUrl:function(){return this.slideshow+"?getHash=1&truncationLength=250&slideshowId="+this.slideshowId
},getImageUploadUrl:function(){var ad=this.fileId.split(".");
return this.imageStore+ad[0]+"-large."+ad[1]
}};
function o(){var ak={start:{},end:{}},ag=Z.paths&&Z.paths.monitor,ad="&fileAction={action}&actionResult={result}&time={time}&fileType={type}",ae=this,aj="",ai="unknown";
function ah(am){function al(an){return function(aq){var ap=typeof aq!=="string",ao=[].slice.call(arguments,ap?0:1);
return ae[an].apply(ae,[ap?am:aq].concat(ao))
}
}return{reset:al("reset"),update:al("update"),start:al("start"),end:al("end"),send:al("send")}
}function af(){return Date.now?Date.now():+new Date()
}this.reset=function(){ak={start:{},end:{}};
delete this.action;
delete this.result;
delete this.type;
return this
};
this.update=function(am,al){var an=typeof am==="string";
C.augmentObject(this,an?al:am,true);
return an?ah(am):this
};
this.start=function(al){if(al!==aj){this.update({action:al})
}al=al||ai;
aj=al;
ak.start[al]=af();
return ah(al)
};
this.end=function(al){al=al||ai;
ak.end[al]=af();
return ah(al)
};
this.send=function(am,al){var aq="",ap=typeof am==="string",an=(ap?am:am.state)||ai,ao=(ak.end[an]||af())-ak.start[an];
if(ap){am=al||{}
}if(!ag||isNaN(ao)){return this
}aq=C.substitute(ad,{action:an||am.action||this.action||ai,result:am.result||this.result||ai,time:ao,type:am.type||this.type||ai});
YUtil.Connect.asyncRequest("GET",ag+aq,{});
return ah(an)
}
}q=q||{trackUserAction:function(){}};
function r(ad){var ae=c[ad];
if(ae){q.trackUserAction(Z.trackingPrefix+ae)
}}function S(){var ad=document.domain.split(".").slice(-2).join(".");
Z=C.merge(Z,I);
ac=document.getElementById(Z.fileInputId);
if(Z.documentDomain==="no_set"||Z.documentDomain==="control"){}else{if(Z.documentDomain==="auto"){document.domain=document.domain
}else{if(Z.documentDomain==="auto_trim"){document.domain=ad
}else{document.domain=Z.documentDomain
}}}if(Z.usePostMessage){YEvent.on(window,"message",w)
}if(Z.slideshareDomain==="control"||Z.slideshareDomain==="auto"){Z.slideshareDomain="//slideshare."+document.domain
}else{if(Z.slideshareDomain==="auto_trim"){Z.slideshareDomain="//slideshare."+ad
}}if(Z.slideshareDomain.lastIndexOf("//",0)!==0){Z.slideshareDomain="//"+Z.slideshareDomain
}if(!(W&&W.id)){YDom.generateId(W,"slideshare-upload-form-")
}x();
YDom.setAttribute(W,"target",Z.transportName);
j=N(function(){YEvent.on(j,"load",Q)
});
document.body.appendChild(j);
YEvent.on(W,"submit",A);
YEvent.on(W,"reset",R);
YEvent.on(ac,"change",e);
YEvent.on(ac,"mousedown",g);
if(Z.enableUnload){YEvent.on(window,"beforeunload",V)
}aa=new J();
aa.changed.subscribe(z)
}function w(ad){var ae;
if(!ad||ad.source!==j.contentWindow||ad.type!=="message"||(ad.origin!=="https:"+Z.slideshareDomain&&ad.origin!=="http:"+Z.slideshareDomain)){return
}ae=YAHOO.lang.JSON.parse(ad.data);
if(ae.type!=="slidesharestatus"){return
}LI[ae.method](ae.payload)
}function x(){O=new k({progressPrefix:Z.progressPrefix}).update(Z.paths)
}function N(ag){var ad=document.createElement("iframe"),af=Z.enableHealthCheck;
ad.name=Z.transportName;
ad.className="slideshare-upload-iframe";
ad.style.display="none";
ad.frameborder="none";
ad.height=0;
ad.width=0;
YEvent.on(ad,"load",function ae(){var ah=!af||i(ad);
YEvent.removeListener(ad,"load",ae);
if(ah){ag.apply(this,arguments)
}});
if(af&&O){ad.src=O.getHealthCheckUrl()
}else{ad.src="javascript:false;"
}return ad
}function b(ae,ai,ad){var ah=ae.indexOf("//")===0||ae.indexOf("http")===0,ag=ae.indexOf("//"+window.location.host)>-1;
function af(ak){var aj=this;
return function(am){var al={};
if(am&&am.responseText){al=LI.parseJSON(LI.htmlUnencode(am.responseText))
}ak.call(aj,al,am)
}
}if(ah&&!ag){(new LI.JSONPRequest(ae,{on:{success:ai,failure:ad,timeout:ad}})).send()
}else{LI.asyncRequest("GET",ae,{success:af(ai),failure:af(ad),custom:{exception:af(ad),error:af(ad)}})
}}function L(){var ad=document.getElementById(Z.fileInputId);
LI.setDataAttribute(ad,"uploaded-filename",ad.value);
W.reset()
}function R(){x();
if(Y){Y.kill()
}T=false
}function K(ad){var ai=ad.success||function(){},ah=ad.failure||function(){},an=0,aj=ad.failureLimit||3,ae=ad.name,af=ad.url,ag=false,am;
function al(ao){if(typeof ao==="undefined"||ao===ae){ag=true;
clearTimeout(am)
}}(function ak(){function ap(){if(!ag){am=setTimeout(ak,1000)
}}function aq(ar){var at;
at=ai(ar);
an=0;
if(at){ap()
}}function ao(ar){var at=true;
if(++an>=aj){at=ah(ar)
}if(at){ap()
}}b(af,aq,ao)
}());
return{kill:al}
}function s(){var ae;
function af(ai){var ak=true,aj=ai.state,al=ai.received||0,ah=ai.size||0,ag=Math.max(0,Math.round(al/ah*100))||0;
if(aj===D.STARTING||aj===D.UPLOADING){aa.state(d.UploadProgressStatus,{percentage:C.substitute(l,{0:ag})})
}else{if(aj===D.DONE){ak=false;
aa.state(d.UploadProgressStatus,{percentage:C.substitute(l,{0:100})});
aa.state(d.UploadProgressEnd,ai)
}else{return ad(ai)
}}return ak
}function ad(ah){var ag=ah.status,ai=ag===413?u.SIZE:(ag===415?u.TYPE:u.PROGRESS);
aa.state(d.UploadError,{type:ai});
return false
}ae=K({name:d.UploadProgressEnd,url:O.getProgressUrl(),success:af,failure:ad});
return ae
}function M(){var ae;
function af(ah){var aj=ah.state,ai=aa.state(),ag=[d.UploadFileComplete,d.UploadQueueStatus,d.UploadQueueStart],ak=true;
if(aj===B.QUEUED){aa.state(d.UploadQueueStatus,ah)
}else{if(aj===B.CONVERTING&&LI.indexOf(ag,ai)>-1){aa.state(d.UploadQueueEnd,ah);
aa.state(d.UploadConvertStart,ah)
}else{if(aj===B.CONVERTING){aa.state(d.UploadConvertStatus,ah)
}else{if(aj===B.DONE){ak=false;
aa.state(d.UploadConvertEnd,ah)
}else{if(aj===B.FAILED){return ad(ah)
}}}}}return ak
}function ad(){aa.state(d.UploadError,{type:u.CONVERT});
return false
}ae=K({name:d.UploadConvertEnd,url:O.getConvertStatusUrl(),success:af,failure:ad});
return ae
}function X(){function ae(ah){var ag=ah.content&&ah.content.Slideshow,aj=ah.hash,af=ah.content.slideshowstr,ai=ah.transcript&&ah.transcript.transcript_body,al=Z.enableTranscriptAsDescription&&ai,ak=window.location.protocol;
if(ag){h={hash:aj,slideshow:ag,slideshowstr:af,title:ag.Title,summary:al&&ai||ag.Description,image:(ag.ThumbnailURL.indexOf("http")===0?"":ak)+ag.ThumbnailURL,extension:ag.Format,type:y(ag.Format),id:ag.ID,url:"http://www.slideshare.net/slideshow/embed_code/"+ag.ID};
aa.state(d.UploadComplete,h)
}else{ad(ah)
}}function ad(af){aa.state(d.UploadError,{type:u.CONVERT2})
}b(O.getPreviewUrl(),ae,ad)
}function U(ad){var af=ad.split("."),ae=af[af.length-1];
return ae.toLowerCase()
}function f(ad){var af=U(ad),ae=O.type||t[af]||p.UNKNOWN;
O.update({type:ae,ext:af}).updateTimer({type:af});
return(Z.enableImageUpload||!Z.enableImageUpload&&ae!==p.IMAGE)&&t.hasOwnProperty(af)
}function n(ad){return(!Z.checkSize)||(ad===undefined)||(ad&&ad<=Z.maxFileSize)
}function y(ad){var af=U(ad),ae=t[af]||p.UNKNOWN;
return LI.i18n.get("slideshare-uploader-"+ae)||""
}function H(ae){var ag=O&&O.getHealthCheckUrl(),ai=ag&&LI.domify('<iframe src="'+ag+'" height="0" width="0" style="display: none"></iframe>'),ak=ae||function(){},aj;
function af(al){if(ai&&ai.parentNode){ai.parentNode.removeChild(ai);
ai=null
}clearTimeout(aj);
ak(al)
}function ad(){var al=ai&&(!Z.enableHealthCheck||i(ai));
af(al)
}function ah(){var al=ai&&ai.readyState==="complete"&&(!Z.enableHealthCheck||i(ai));
af(al)
}if(ai){ai.onload=ad;
document.body.appendChild(ai);
aj=setTimeout(ah,10000)
}else{ah()
}}function e(){var ai=ac,aj=ai.value.replace(/\\/g,"/").split(/\//g),ae=ai.files?ai.files[0].size:undefined,ag=aj.pop(),ah=t[U(ag)]||p.UNKNOWN,ad=ah===p.IMAGE;
if(!n(ae)){aa.state(d.UploadError,{type:u.SIZE});
return
}aa.state(d.UploadActive,{isImageUpload:ad,type:ah});
if(f(ag)){H(function af(ak){if(ak){v=O.getUploadUrl();
YDom.setAttribute(W,"action",v);
W.submit();
aa.state(d.UploadPreview,{track:ad,title:ag,type:y(ag)})
}else{aa.state(d.UploadError,{type:u.PROGRESS})
}})
}else{aa.state(d.UploadError,{type:u.TYPE})
}}function g(){r("upload_icon_click")
}function i(af){var ag=af||j,ad=true,ah;
if(Z.usePostMessage){return true
}try{ah=ag.contentWindow.document;
if(!ah.getElementsByTagName("script").length){ad=false
}}catch(ae){ad=false
}return ad
}function Q(){setTimeout(function(){var ad=i(j);
if(!ad){aa.state(d.UploadError,{type:u.IFRAME})
}},100)
}function A(){r("upload_file_upload")
}function V(ad){if(P&&P.is_a(d.UploadActive)&&!P.is_a(d.UploadError)){ad.returnValue=ab;
return ab
}}function z(af){var ae=[].concat(arguments[1]),ah=ae.shift(),ad=ae.shift(),ag=ae[0]||{},ai=O.timer;
if(ag.track!==false){r(ah)
}switch(ah){case d.Inactive:L();
break;
case d.Active:break;
case d.UploadActive:Y=s();
ai.reset();
aa.state(d.UploadProgressStart);
break;
case d.UploadProgressStart:ai.start(E.UPLOAD);
break;
case d.UploadProgressEnd:if(Y){Y.kill(ah)
}m();
break;
case d.UploadImageComplete:ai.update({result:E.SUCCEEDED}).end(E.UPLOAD).send().reset();
break;
case d.UploadFileComplete:O.update({slideshowId:ag.slideshow_id});
aa.state(d.UploadQueueStart);
ai.update({result:E.SUCCEEDED}).end(E.UPLOAD).send();
Y=M();
break;
case d.UploadQueueStart:ai.start(E.QUEUE);
break;
case d.UploadQueueEnd:ai.update({result:E.SUCCEEDED}).end(E.QUEUE).send();
break;
case d.UploadConvertStart:ai.start(E.CONVERT);
break;
case d.UploadConvertEnd:if(Y){Y.kill(ah)
}X();
ai.update({result:E.SUCCEEDED}).end(E.CONVERT).send().reset();
break;
case d.UploadError:L();
if(Y){Y.kill()
}ai.send(ai.action,{result:E.FAILED});
break;
case d.UploadCancel:aa.state(d.Inactive,true);
if(Y){Y.kill()
}ai.send(ai.action,{result:E.CANCELLED});
break;
case d.UploadComplete:L();
if(Y){Y.kill()
}break;
default:break
}}function m(){var af=Z.convertTimeThresholds,ae=function(ah,ag){if(typeof ah==="string"&&(ah=ah.match(/\d+/))){ah=parseInt(ah[0],10)
}if(ag&&ah&&!isNaN(ah)){ah=ah*1000;
window.setTimeout(function(){aa.state(ag)
},ah)
}};
if(af){for(var ad in af){if(af.hasOwnProperty(ad)){ae(af[ad],d[ad])
}}}}function J(){var ad;
this.changed=new YAHOO.util.CustomEvent("changed");
this.state=function(af,ae){if(arguments.length>=1){this.changed.fire(af,ad,ae||[]);
ad=af
}else{return ad
}};
this.STATE=d
}S()
};